import{d as V,r as m,j as L,k as p,o as F,n as H,m as a,l as e,a as _,t as k,p as l,G as q,e as Z,g as J,H as Q,h as W,i as X,I as Y,w as ee,C as te,c as ae,N as R,J as P,v as le,x,K as oe,L as ne}from"./index-cPQIZp5h.js";import{u as se}from"./index-4O8ra6re.js";import{A as ie}from"./add-MkuVr4Ss.js";import{R as re}from"./refresh-HJby1V2m.js";import{P as ue}from"./pen-DnfYYN33.js";import{S as ce}from"./search-tnmrM_yG.js";import{D as de}from"./delete-WaA4XgRx.js";import{b as U}from"./brand.service-EESgSz93.js";import{c as pe}from"./category.service-mV8_iF5O.js";import{S as _e,E as me}from"./exit-GBDA2x5z.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const fe={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0"},ve={class:"text-xl font-semibold"},ge={class:"flex gap-2"},ye=_("span",{class:"text-xs ml-1"},"Enter",-1),we=_("span",{class:"text-xs ml-1"},"Esc",-1),xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},T={__name:"Form",props:{type:String,id:[String,Number]},emits:["create","update","close"],setup(G,{emit:i}){const{t:u,locale:j}=V(),f=G,I=i,E=m(null),C=m(!1),N=m(null),$=m([]),r=m({title_uz:"",title_ru:"",title_ko:"",title_en:"",category_id:null}),B=()=>{pe.all().then(n=>{$.value=n})},g=n=>({required:!0,trigger:"blur",validator:(s,z)=>{if(!z)return new Error(u(n==="image"?"require_image":"require_name"))}}),S={title_uz:g("title_uz"),title_ko:g("title_ko"),title_ru:g("title_ru"),title_en:g("title_en"),category_id:{required:!0,trigger:"blur",validator:(n,s)=>{if(!s)return new Error(u("require_category"))}}};L(async()=>{if(B(),f.type==="update"&&f.id)try{const n=await U.getOne(f.id);r.value=n}catch(n){console.error("Ma'lumot yuklashda xatolik:",n)}setTimeout(()=>{var n;(n=N.value)==null||n.focus()},100)});const d=async()=>{var n;try{if(await((n=E.value)==null?void 0:n.validate()),C.value=!0,f.type==="create"){const s=await U.create(r.value);I("create",s)}else if(f.type==="update"){const s=await U.update(f.id,r.value);I("update",s)}}catch(s){console.warn("Form not valid or failed",s)}finally{C.value=!1}},y=()=>I("close"),b=n=>{n.code==="Enter"&&d()};return(n,s)=>{const z=p("n-icon"),K=p("n-button"),A=p("n-select"),w=p("n-form-item"),h=p("n-input"),o=p("n-spin"),t=p("n-form");return F(),H(t,{ref_key:"formRef",ref:E,model:r.value,rules:S},{default:a(()=>[e(o,{show:C.value},{default:a(()=>[_("div",fe,[_("p",ve,k(l(u)("brand"))+" "+k(f.type=="create"?l(u)("add").toLowerCase():l(u)("change").toLowerCase()),1),_("div",ge,[e(K,{onClick:d,type:"success",disabled:C.value,class:"min-w-[120px]"},{icon:a(()=>[e(z,null,{default:a(()=>[e(l(_e))]),_:1})]),default:a(()=>[q(" "+k(l(u)("save"))+" ",1),ye]),_:1},8,["disabled"]),e(K,{onClick:y,type:"warning",class:"min-w-[120px]"},{icon:a(()=>[e(z,null,{default:a(()=>[e(l(me))]),_:1})]),default:a(()=>[q(" "+k(l(u)("exit"))+" ",1),we]),_:1})])]),e(w,{label:l(u)("category"),path:"category_id"},{default:a(()=>[e(A,{options:$.value,fitlerable:"",clearable:"",onKeydown:b,value:r.value.category_id,"onUpdate:value":s[0]||(s[0]=c=>r.value.category_id=c),"label-field":"title_"+l(j),"value-field":"id"},null,8,["options","value","label-field"])]),_:1},8,["label"]),_("div",xe,[e(w,{label:l(u)("title")+" UZB",path:"title_uz"},{default:a(()=>[e(h,{ref_key:"inputInstRef",ref:N,onKeydown:b,value:r.value.title_uz,"onUpdate:value":s[1]||(s[1]=c=>r.value.title_uz=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(w,{label:l(u)("title")+" KOR",path:"title_ko"},{default:a(()=>[e(h,{onKeydown:b,value:r.value.title_ko,"onUpdate:value":s[2]||(s[2]=c=>r.value.title_ko=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(w,{label:l(u)("title")+" RUS",path:"title_ru"},{default:a(()=>[e(h,{onKeydown:b,value:r.value.title_ru,"onUpdate:value":s[3]||(s[3]=c=>r.value.title_ru=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(w,{label:l(u)("title")+" ENG",path:"title_en"},{default:a(()=>[e(h,{onKeydown:b,value:r.value.title_en,"onUpdate:value":s[4]||(s[4]=c=>r.value.title_en=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"])])]),_:1},8,["show"])]),_:1},8,["model"])}}},be={class:"p-2 space-y-2"},he={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ke={class:"text-xl font-bold"},Ce={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},Se=_("span",{class:"ml-1 text-xs"},"Shift+R",-1),ze=_("span",{class:"ml-1 text-xs"},"Insert",-1),qe={__name:"Index",setup(G){const{t:i,locale:u}=V(),{insert:j,shift:f,r:I}=se(),E=Z(),C=J(),N=Q(),$=W(),r=le("fileUrl"),B=m([]),g=m(!1);m(!1);const S=m({text:""}),d=m({create:!1,update:!1,update_id:null}),y=o=>{g.value=!0,U.all(S.value).then(t=>{B.value=t,g.value=!1,o&&(d.value[o]=!1)})},b=X(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(o,t)=>t+1},{title:i("category"),key:"title",render(o){var t,c,D;return x("div",{class:"flex items-center"},[(t=o.category)!=null&&t.image?x(oe,{src:r+((c=o.category)==null?void 0:c.image),height:35,width:50,style:{borderRadius:"35px",marginRight:"8px"},lazy:!0,previewDisabled:!0}):x(ne,{size:"small",style:{marginRight:"8px"}}),x("span",{class:"font-semibold"},(D=o.category)==null?void 0:D["title_"+u.value])])}},{title:i("title")+" UZB",key:"title_uz"},{title:i("title")+" KOR",key:"title_ko"},{title:i("title")+" RUS",key:"title_ru"},{title:i("title")+" ENG",key:"title_en"},{title:i("action"),key:"action",align:"center",width:120,render(o){return[x(P,{size:"small",type:"success",onClick:t=>{d.value.update_id=o.id,d.value.update=!0},style:{marginRight:"8px"}},{icon:()=>x(R,{component:ue,size:22})}),x(P,{size:"small",type:"warning",onClick:()=>{C.warning({title:i("warning"),content:i("delete_row"),positiveText:i("yes"),negativeText:i("no"),onPositiveClick:()=>{U.delete(o.id).then(()=>y()).catch(t=>{$.errorPage=t.data,E.push({name:"error page"})})},onNegativeClick:()=>N.success(i("cancel"))})}},{icon:()=>x(R,{component:de,size:22})})]}}]),n=Y({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:o=>n.page=o,onUpdatePageSize:o=>{n.pageSize=o,n.page=1}}),s=o=>({style:"cursor: pointer;"}),z=()=>y(),K=()=>{S.value.text="",y()},A=()=>d.value.create=!0,w=o=>d.value[o]=!1,h=o=>y(o);return ee(j,o=>o&&A()),te(()=>{f.value&&I.value&&y()}),L(()=>y()),(o,t)=>{const c=p("n-input"),D=p("n-data-table"),M=p("n-card"),O=p("n-modal");return F(),ae("div",be,[_("div",he,[_("h2",ke,k(l(i)("brand")),1),_("div",Ce,[e(c,{value:S.value.text,"onUpdate:value":t[0]||(t[0]=v=>S.value.text=v),onInput:z,placeholder:l(i)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:a(()=>[e(l(R),null,{default:a(()=>[e(l(ce))]),_:1})]),_:1},8,["value","placeholder"]),e(l(P),{type:"warning",onClick:K},{icon:a(()=>[e(l(R),null,{default:a(()=>[e(l(re))]),_:1})]),default:a(()=>[q(" "+k(l(i)("update"))+" ",1),Se]),_:1}),e(l(P),{type:"success",onClick:A},{icon:a(()=>[e(l(R),null,{default:a(()=>[e(l(ie))]),_:1})]),default:a(()=>[q(" "+k(l(i)("add"))+" ",1),ze]),_:1})])]),e(D,{"row-props":s,pagination:n,loading:g.value,columns:b.value,data:B.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)"},null,8,["pagination","loading","columns","data"]),e(O,{"transform-origin":"center",show:d.value.create,"onUpdate:show":t[3]||(t[3]=v=>d.value.create=v)},{default:a(()=>[e(M,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:a(()=>[e(T,{onClose:t[1]||(t[1]=v=>w("create")),onCreate:t[2]||(t[2]=v=>h("create")),type:"create"})]),_:1})]),_:1},8,["show"]),e(O,{"transform-origin":"center",show:d.value.update,"onUpdate:show":t[6]||(t[6]=v=>d.value.update=v)},{default:a(()=>[e(M,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:a(()=>[e(T,{type:"update",id:d.value.update_id,onClose:t[4]||(t[4]=v=>w("update")),onUpdate:t[5]||(t[5]=v=>h("update"))},null,8,["id"])]),_:1})]),_:1},8,["show"])])}}};export{qe as default};
