import{e as H,b as L,r as y,g as Y,c as _,a as t,i as n,v as e,s,j as u,n as A,k as h,o as p,G as T,q as U,R as V,S as B,U as w}from"./index-C64ZonsX.js";import{E as J}from"./eye-Dda92Wi_.js";import{E as K}from"./exit-BZ-cbgC6.js";import{r as P}from"./report.service-fJ3b0ZKN.js";import{p as Q}from"./product.service-D9ltv91d.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"p-4"},X={class:"bg-white rounded-lg shadow-md"},Z={class:"flex justify-between items-center p-4 bg-gray-100 rounded-t-lg"},tt={class:"text-xl font-bold"},et={class:"flex flex-wrap gap-4 p-2"},st={class:"w-[400px] sm:w-[300px]"},ot={class:"w-full sm:w-64"},lt={class:"w-full sm:w-64"},at={class:"w-full sm:w-auto"},nt={class:"p-4"},dt={class:"md:hidden space-y-3"},it=["onClick"],rt={class:"flex items-start justify-between gap-2"},ct={class:"text-xs text-slate-500"},_t={class:"min-w-0 text-right"},ut={class:"text-slate-500 text-xs"},pt=["title"],xt={class:"mt-2 grid grid-cols-3 gap-2"},ht={class:"text-slate-500 text-[11px]"},bt={class:"font-semibold"},vt={class:"text-center"},mt={class:"text-slate-500 text-[11px]"},gt={class:"font-semibold"},yt={class:"text-right"},ft={class:"text-slate-500 text-[11px]"},wt={class:"rounded-lg border p-3 bg-gray-50 sticky bottom-5"},kt={class:"flex justify-between text-sm"},qt={class:"font-semibold"},Nt={class:"flex justify-between text-sm mt-1"},Ct={class:"font-semibold"},Dt={class:"flex justify-between text-sm mt-1"},Et={key:0,class:"rounded-lg border p-6 bg-white"},jt={class:"hidden md:block"},Rt={class:"overflow-x-auto"},St={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden border table-auto"},Tt={class:"bg-gray-200 text-left border"},Ut={class:"px-4 py-2 text-sm"},Vt={class:"px-4 py-2 text-sm"},Bt={class:"px-4 py-2 text-sm"},It={class:"px-4 py-2 text-sm"},$t=["onDblclick"],zt={class:"px-4 py-2 border"},Ft=["title"],Gt={class:"px-4 py-2 text-right border"},Mt={class:"px-4 py-2 text-right border"},Ot={class:"px-4 py-2 text-right border"},Ht={key:0},Lt={colspan:"5",class:"px-4 py-6 text-center text-slate-500"},Yt={class:"bg-gray-100"},At={colspan:"2",class:"px-4 py-2 text-center font-semibold border"},Jt={class:"px-4 py-2 text-right border"},Kt={class:"px-4 py-2 text-right border"},Pt={class:"px-4 py-2 text-right border"},oe={__name:"sklad_report",setup(Qt){const I=H(),{t:l,locale:x}=L(),k=A(),q=y([]),f=new Date,$=new Date(f.getFullYear(),f.getMonth(),1);let b=y(!1),N=y(!0);const a=y([]),c=y({range:[$.getTime(),f.getTime()],product_id:null,type:null}),z=async()=>{try{q.value=await Q.all()}catch(i){console.log(i)}};Y(()=>{z()});const F=()=>{b.value=!0,N.value=!0,P.omborReport(c.value).then(i=>{a.value=i,b.value=!1,i.data&&i.data.length>0&&(console.log("Enter "),N.value=!1)})},C=i=>{k.push({path:"/sverka-warehouse",query:{range:c.value.range,product_id:i.product_id,type:i.type,action:!0}})};return(i,d)=>{const D=h("n-icon"),E=h("n-button"),G=h("n-date-picker"),j=h("n-select"),R=h("n-empty"),M=h("n-spin");return p(),_("div",W,[t("div",X,[t("div",Z,[t("h2",tt,e(s(l)("sklad report")),1),n(E,{onClick:d[0]||(d[0]=r=>s(k).go(-1)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700"},{icon:u(()=>[n(D,{size:"28"},{default:u(()=>[n(s(K))]),_:1})]),default:u(()=>[T(" "+e(s(l)("exit")),1)]),_:1})]),t("div",et,[t("div",st,[n(G,{value:c.value.range,"onUpdate:value":d[1]||(d[1]=r=>c.value.range=r),type:"datetimerange",clearable:"",class:"w-full sm:w-[300px]"},null,8,["value"])]),t("div",ot,[n(j,{options:q.value,value:c.value.product_id,"onUpdate:value":d[2]||(d[2]=r=>c.value.product_id=r),"value-field":"id","label-field":"title_"+s(x),placeholder:s(l)("product"),filterable:"",clearable:"",class:"w-full"},null,8,["options","value","label-field","placeholder"])]),t("div",lt,[n(j,{options:s(I).skladType,value:c.value.type,"onUpdate:value":d[3]||(d[3]=r=>c.value.type=r),"value-field":"id","label-field":"title_"+s(x),placeholder:s(l)("type"),filterable:"",clearable:"",class:"w-full"},null,8,["options","value","label-field","placeholder"])]),t("div",at,[n(E,{type:"success",onClick:F,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-700 w-full sm:w-auto"},{icon:u(()=>[n(D,null,{default:u(()=>[n(s(J))]),_:1})]),default:u(()=>[T(" "+e(s(l)("see")),1)]),_:1})])]),t("div",nt,[n(M,{show:s(b),class:"w-full"},{default:u(()=>{var r,S;return[t("div",dt,[(p(!0),_(V,null,B(a.value.data,(o,v)=>{var m,g;return p(),_("div",{key:v,class:"rounded-lg border p-3 shadow-sm bg-white active:scale-[0.99] transition",onClick:O=>C(o)},[t("div",rt,[t("div",ct,"#"+e(v+1),1),t("div",_t,[t("div",ut,e(s(l)("product")),1),t("div",{class:"font-medium truncate",title:(m=o.product)==null?void 0:m["title_"+s(x)]},e(((g=o.product)==null?void 0:g["title_"+s(x)])||"â€”"),9,pt)])]),t("div",xt,[t("div",null,[t("div",ht,e(s(l)("kirim")),1),t("div",bt,e(o.in_total_quantity||0),1)]),t("div",vt,[t("div",mt,e(s(l)("rasxod")),1),t("div",gt,e(o.out_total_quantity||0),1)]),t("div",yt,[t("div",ft,e(s(l)("limit")),1),t("span",{class:w(["inline-block px-2 py-0.5 rounded text-xs font-semibold",o.in_total_quantity-o.out_total_quantity>0?"bg-emerald-100 text-emerald-700":o.in_total_quantity-o.out_total_quantity<0?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-700"])},e((Number(o.in_total_quantity)||0)-(Number(o.out_total_quantity)||0)),3)])])],8,it)}),128)),t("div",wt,[t("div",kt,[t("span",null,e(s(l)("total"))+" "+e(s(l)("kirim")),1),t("span",qt,e(a.value.total_in||0),1)]),t("div",Nt,[t("span",null,e(s(l)("total"))+" "+e(s(l)("rasxod")),1),t("span",Ct,e(a.value.total_out||0),1)]),t("div",Dt,[t("span",null,e(s(l)("limit")),1),t("span",{class:w(["font-semibold px-2 rounded",(Number(a.value.total_in)||0)-(Number(a.value.total_out)||0)>0?"bg-emerald-100 text-emerald-700":(Number(a.value.total_in)||0)-(Number(a.value.total_out)||0)<0?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-700"])},e((Number(a.value.total_in)||0)-(Number(a.value.total_out)||0)),3)])]),!((r=a.value.data)!=null&&r.length)&&!s(b)?(p(),_("div",Et,[n(R)])):U("",!0)]),t("div",jt,[t("div",Rt,[t("table",St,[t("thead",null,[t("tr",Tt,[d[4]||(d[4]=t("th",{class:"px-4 py-2 text-sm w-10"},"#",-1)),t("th",Ut,e(s(l)("product")),1),t("th",Vt,e(s(l)("kirim")),1),t("th",Bt,e(s(l)("rasxod")),1),t("th",It,e(s(l)("limit")),1)])]),t("tbody",null,[(p(!0),_(V,null,B(a.value.data,(o,v)=>{var m,g;return p(),_("tr",{key:v,class:"border hover:bg-gray-50 cursor-pointer",onDblclick:O=>C(o)},[t("td",zt,e(v+1),1),t("td",{class:"px-4 py-2 border max-w-[360px] truncate",title:(m=o.product)==null?void 0:m["title_"+s(x)]},e((g=o.product)==null?void 0:g["title_"+s(x)]),9,Ft),t("td",Gt,e(o.in_total_quantity),1),t("td",Mt,e(o.out_total_quantity),1),t("td",Ot,[t("span",{class:w(["inline-block min-w-[64px] text-center px-2 py-0.5 rounded text-xs font-semibold",o.in_total_quantity-o.out_total_quantity>0?"bg-emerald-100 text-emerald-700":o.in_total_quantity-o.out_total_quantity<0?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-700"])},e((Number(o.in_total_quantity)||0)-(Number(o.out_total_quantity)||0)),3)])],40,$t)}),128)),!((S=a.value.data)!=null&&S.length)&&!s(b)?(p(),_("tr",Ht,[t("td",Lt,[n(R)])])):U("",!0),t("tr",Yt,[t("td",At,e(s(l)("total")),1),t("td",Jt,e(a.value.total_in||0),1),t("td",Kt,e(a.value.total_out||0),1),t("td",Pt,e((Number(a.value.total_in)||0)-(Number(a.value.total_out)||0)),1)])])])])])]}),_:1},8,["show"])])])])}}};export{oe as default};
