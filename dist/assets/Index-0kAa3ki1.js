import{v as r,u as Y,b as j,e as E,G as J,f as T,r as c,g as V,H as $,w as F,B as G,h as K,i as v,o as O,c as q,a as g,t as w,m as s,j as n,k as i,N as b,F as L,I as Q,q as y,s as f,J as W,K as X}from"./index-akkEPHo5.js";import{u as Z,S as ee}from"./index-O6cQfjmS.js";import{R as te}from"./refresh-Y4iRoJLo.js";import{u as ae}from"./NumberFormat-1Sx0zlcb.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const u="/client";class se{all(t){let a=t!=null&&t.text?"?text="+t.text:"";return r.get(u+"/all"+a).then(o=>o)}create(t){return r.post(u+"/",t).then(a=>a)}update(t,a){return r.patch(u+`/${t}`,a).then(o=>o)}getOne(t){return r.get(u+`/${t}`).then(a=>a)}delete(t){return r.delete(u+`/${t}`).then(a=>a)}}const ne=new se,le={class:"p-4 space-y-4"},oe={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},re={class:"text-xl font-bold"},ce={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},ie=g("span",{class:"ml-1 text-xs"},"Shift+R",-1),ge={__name:"Index",setup(S){const{t,locale:a}=Y(),{insert:o,shift:N,r:k}=Z(),I=y("dayJS");j(),E(),J(),T();const z=y("fileUrl"),_=c([]),h=c(!1);c(!1);const d=c({text:""}),x=c({create:!1,update:!1,update_id:null}),p=e=>{h.value=!0,ne.all(d.value).then(l=>{_.value=l,h.value=!1,e&&(x.value[e]=!1)})},D=V(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(e,l)=>l+1},{title:t("fullname"),key:"fullname",render(e){return f("div",{class:"flex items-center"},[e.image?f(W,{src:z+e.image,height:35,width:50,style:{borderRadius:"35px",marginRight:"8px"},lazy:!0,previewDisabled:!0}):f(X,{size:"small",style:{marginRight:"8px"}}),f("span",{class:"font-semibold"},e.fullname)])}},{title:t("phone"),key:"phone",render:e=>ae(e.phone_number)},{title:t("login")+" / "+t("datetime"),key:"login",render:e=>I(e.datetime).format("YYYY-MM-DD HH:mm:ss")}]),m=$({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:e=>m.page=e,onUpdatePageSize:e=>{m.pageSize=e,m.page=1}}),R=e=>({style:"cursor: pointer;"}),B=e=>e.status?"":"bg-red-50",C=()=>p(),M=()=>{d.value.text="",p()},P=()=>x.value.create=!0;return F(o,e=>e&&P()),G(()=>{N.value&&k.value&&p()}),K(()=>p()),(e,l)=>{const A=v("n-input"),H=v("n-data-table");return O(),q("div",le,[g("div",oe,[g("h2",re,w(s(t)("client")),1),g("div",ce,[n(A,{value:d.value.text,"onUpdate:value":l[0]||(l[0]=U=>d.value.text=U),onInput:C,placeholder:s(t)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:i(()=>[n(s(b),null,{default:i(()=>[n(s(ee))]),_:1})]),_:1},8,["value","placeholder"]),n(s(Q),{type:"warning",onClick:M},{icon:i(()=>[n(s(b),null,{default:i(()=>[n(s(te))]),_:1})]),default:i(()=>[L(" "+w(s(t)("update"))+" ",1),ie]),_:1})])]),n(H,{"row-props":R,pagination:m,loading:h.value,columns:D.value,data:_.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)","row-class-name":B},null,8,["pagination","loading","columns","data"])])}}};export{ge as default};
