import{u as T}from"./index-DV1-0FZr.js";import{R as Y}from"./refresh-CQhCvjBv.js";import{S as j}from"./search-BpfY4QEB.js";import{T as A}from"./tour-DUsV4QXm.js";import{c as h}from"./clients.service-CrmP7mhz.js";import{u as H}from"./NumberFormat-BDrUmd0_.js";import{b as U,r as o,f as V,m as g,l as d,L as _,N as p,M as E,w as J,B as F,g as G,c as K,a as u,i as n,v as x,s,j as l,k as v,o as L,G as q}from"./index-GwBpnSVU.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"p-2 space-y-2 bg-white rounded-xl shadow-md overflow-x-auto"},Q={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},W={class:"text-xl font-bold"},X={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},ie={__name:"Index",setup(Z){const{t}=U(),{insert:w,shift:y,r:b}=T(),k=g("dayJS");g("fileUrl");const f=o([]),m=o(!1);o(!1);const i=o({text:""}),S=o({create:!1,update:!1,update_id:null}),r=e=>{m.value=!0,h.all(i.value).then(a=>{f.value=a,m.value=!1})},z=V(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(e,a)=>a+1},{title:t("fullname"),key:"fullname",render(e){return d("div",{class:"flex items-center"},[d("span",{class:"font-semibold"},e.fullname)])}},{title:t("phone"),key:"phone",render:e=>H(e.phone_number)},{title:t("email"),key:"mail"},{title:t("login")+" / "+t("datetime"),key:"datetime",render:e=>k(e.datetime).format("YYYY-MM-DD HH:mm:ss")},{title:t("send"),key:"status",width:80,render(e){return[d(_,{size:"small",type:"success",onClick:a=>{h.sendNotification(e.id).then(()=>{})},style:{marginRight:"8px"}},{icon:()=>d(p,{component:A,size:22})})]}}]),c=E({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:e=>c.page=e,onUpdatePageSize:e=>{c.pageSize=e,c.page=1}}),C=e=>({style:"cursor: pointer;"}),I=e=>e.status?"":"bg-red-50",B=()=>r(),N=()=>{i.value.text="",r()},D=()=>S.value.create=!0;return J(w,e=>e&&D()),F(()=>{y.value&&b.value&&r()}),G(()=>r()),(e,a)=>{const M=v("n-input"),P=v("n-data-table");return L(),K("div",O,[u("div",Q,[u("h2",W,x(s(t)("client")),1),u("div",X,[n(M,{value:i.value.text,"onUpdate:value":a[0]||(a[0]=R=>i.value.text=R),onInput:B,placeholder:s(t)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:l(()=>[n(s(p),null,{default:l(()=>[n(s(j))]),_:1})]),_:1},8,["value","placeholder"]),n(s(_),{type:"warning",onClick:N},{icon:l(()=>[n(s(p),null,{default:l(()=>[n(s(Y))]),_:1})]),default:l(()=>[q(" "+x(s(t)("update"))+" ",1),a[1]||(a[1]=u("span",{class:"ml-1 text-xs"},"Shift+R",-1))]),_:1,__:[1]})])]),n(P,{"row-props":C,pagination:c,loading:m.value,columns:z.value,data:f.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)","row-class-name":I},null,8,["pagination","loading","columns","data"])])}}};export{ie as default};
