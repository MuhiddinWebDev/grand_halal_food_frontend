import{x as r,u as Y,d as j,f as E,H as J,g as T,r as c,h as V,I as $,w as G,C as K,i as O,j as v,o as F,c as L,a as g,t as w,n as s,k as n,l as i,N as b,G as q,J as Q,s as y,v as f,K as W,L as X}from"./index-T3OpxodD.js";import{u as Z,S as ee}from"./index-kVvJLiRa.js";import{R as te}from"./refresh-rsWKEIMH.js";import{u as ae}from"./NumberFormat-1Sx0zlcb.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const u="/client";class se{all(t){let a=t!=null&&t.text?"?text="+t.text:"";return r.get(u+"/all"+a).then(o=>o)}create(t){return r.post(u+"/",t).then(a=>a)}update(t,a){return r.patch(u+`/${t}`,a).then(o=>o)}getOne(t){return r.get(u+`/${t}`).then(a=>a)}delete(t){return r.delete(u+`/${t}`).then(a=>a)}}const ne=new se,le={class:"p-4 space-y-4"},oe={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},re={class:"text-xl font-bold"},ce={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},ie=g("span",{class:"ml-1 text-xs"},"Shift+R",-1),ge={__name:"Index",setup(S){const{t,locale:a}=Y(),{insert:o,shift:N,r:k}=Z(),I=y("dayJS");j(),E(),J(),T();const z=y("fileUrl"),x=c([]),h=c(!1);c(!1);const d=c({text:""}),_=c({create:!1,update:!1,update_id:null}),p=e=>{h.value=!0,ne.all(d.value).then(l=>{x.value=l,h.value=!1,e&&(_.value[e]=!1)})},D=V(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(e,l)=>l+1},{title:t("fullname"),key:"fullname",render(e){return f("div",{class:"flex items-center"},[e.image?f(W,{src:z+e.image,height:35,width:50,style:{borderRadius:"35px",marginRight:"8px"},lazy:!0,previewDisabled:!0}):f(X,{size:"small",style:{marginRight:"8px"}}),f("span",{class:"font-semibold"},e.fullname)])}},{title:t("phone"),key:"phone",render:e=>ae(e.phone_number)},{title:t("login")+" / "+t("datetime"),key:"login",render:e=>I(e.datetime).format("YYYY-MM-DD HH:mm:ss")}]),m=$({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:e=>m.page=e,onUpdatePageSize:e=>{m.pageSize=e,m.page=1}}),C=e=>({style:"cursor: pointer;"}),R=e=>e.status?"":"bg-red-50",M=()=>p(),B=()=>{d.value.text="",p()},P=()=>_.value.create=!0;return G(o,e=>e&&P()),K(()=>{N.value&&k.value&&p()}),O(()=>p()),(e,l)=>{const A=v("n-input"),H=v("n-data-table");return F(),L("div",le,[g("div",oe,[g("h2",re,w(s(t)("client")),1),g("div",ce,[n(A,{value:d.value.text,"onUpdate:value":l[0]||(l[0]=U=>d.value.text=U),onInput:M,placeholder:s(t)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:i(()=>[n(s(b),null,{default:i(()=>[n(s(ee))]),_:1})]),_:1},8,["value","placeholder"]),n(s(Q),{type:"warning",onClick:B},{icon:i(()=>[n(s(b),null,{default:i(()=>[n(s(te))]),_:1})]),default:i(()=>[q(" "+w(s(t)("update"))+" ",1),ie]),_:1})])]),n(H,{"row-props":C,pagination:m,loading:h.value,columns:D.value,data:x.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)","row-class-name":R},null,8,["pagination","loading","columns","data"])])}}};export{ge as default};
