import{o as u,c as g,a as o,M as P,u as U,f as D,Q as K,b as T,r as h,h as q,i as I,j as C,m as a,t as _,R as b,S,k as O,v as R,l as z,T as j,U as G}from"./index-hhVleVlL.js";import{_ as w}from"./_plugin-vue_export-helper-x3n3nnut.js";const Q={},F={class:"main-icons"},H=o("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[o("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5s5 2.24 5 5s-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3z",fill:"currentColor"})],-1),J=[H];function W(i,s){return u(),g("div",F,J)}const X=w(Q,[["render",W]]),Y={},Z={class:"main-icons"},ee=P('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M63.998 86.004l21.998-21.998L448 426.01l-21.998 21.998z" fill="currentColor"></path><path d="M259.34 192.09l60.57 60.57a64.07 64.07 0 0 0-60.57-60.57z" fill="currentColor"></path><path d="M252.66 319.91l-60.57-60.57a64.07 64.07 0 0 0 60.57 60.57z" fill="currentColor"></path><path d="M256 352a96 96 0 0 1-92.6-121.34l-69.07-69.08C66.12 187.42 39.24 221.14 16 256c26.42 44 62.56 89.24 100.2 115.18C159.38 400.92 206.33 416 255.76 416A233.47 233.47 0 0 0 335 402.2l-53.61-53.6A95.84 95.84 0 0 1 256 352z" fill="currentColor"></path><path d="M256 160a96 96 0 0 1 92.6 121.34L419.26 352c29.15-26.25 56.07-61.56 76.74-96c-26.38-43.43-62.9-88.56-101.18-114.82C351.1 111.2 304.31 96 255.76 96a222.92 222.92 0 0 0-78.21 14.29l53.11 53.11A95.84 95.84 0 0 1 256 160z" fill="currentColor"></path></svg>',1),te=[ee];function oe(i,s){return u(),g("div",Z,te)}const ne=w(Y,[["render",oe]]),p=i=>(j("data-v-35f3fdc9"),i=i(),G(),i),se={class:"form_body"},le={class:"lang-top"},ae={class:"contact-wrapper"},re={class:"login-cta"},ce={class:"form-row"},ie={class:"form-row"},ue={class:"input-icon"},pe=p(()=>o("div",{class:"form-row"},null,-1)),de={class:"form-row"},he=p(()=>o("div",{class:"circle one"},null,-1)),_e=p(()=>o("div",{class:"circle two"},null,-1)),fe=p(()=>o("div",{class:"circle three"},null,-1)),ve=p(()=>o("div",{class:"circle four"},null,-1)),ge={__name:"Index",setup(i){const{t:s,locale:M}=U(),c=D(),N=K(),L=T(),d=h(null),m=h(!1),n=h({phone:"+998",password:""}),f=h(0),$=()=>{if(f.value<n.value.phone.length){let t=B(n.value.phone);n.value.phone=t}f.value=n.value.phone.length},B=t=>{if(!t)return t;const e=t.replace(/[^\d]/g,""),l=e.length;return l<4?`+998${e}`:l<6?`+${e.slice(0,3)} (${e.slice(3,5)}`:l<8?`+${e.slice(0,3)} (${e.slice(3,5)}) ${e.slice(5)}`:l<10?`+${e.slice(0,3)} (${e.slice(3,5)}) ${e.slice(5,8)} ${e.slice(8)}`:`+${e.slice(0,3)} (${e.slice(3,5)}) ${e.slice(5,8)} ${e.slice(8,10)} ${e.slice(10)}`},v=t=>{N.warning({title:s("warning"),content:t,duration:2e3})},x=async()=>{let t=n.value.phone.replace(/[^\d]/g,"");if(t.length<12&&n.value.password.length<3)v(s("rule_full"));else if(n.value.password.length<3)v(s("rule_pass"));else if(t.length<12)v(s("rule_num"));else if(t.length>=12&&n.value.password.length>=4)try{n.value.phone=n.value.phone.replace(/[^\d]/g,""),R.post("users/login",n.value).then(e=>{localStorage.setItem("token",e.token),localStorage.setItem("role",e.role),c.currentData=e,c.currentLang=e.lang||"uz";let l="/home";e.role=="Inspector"&&(l="/sklad-table"),L.push({path:l})}).catch(e=>{f.value=0,$()})}catch{}},E=t=>{t.key=="Enter"&&x()},V=t=>{let e=n.value.phone.replace(/[^\d]/g,"");t.key=="Enter"&&e.length>=12&&d.value.focus()},y=t=>{m.value=t,t?d.value.type="text":d.value.type="password"},k=t=>{localStorage.setItem("lang",t),M.value=t,c.currentLang=t};return q(()=>{k(c.currentLang)}),(t,e)=>{const l=I("n-select"),A=I("n-icon");return u(),g("div",se,[o("div",le,[C(l,{style:{width:"150px"},value:a(c).currentLang,"onUpdate:value":[e[0]||(e[0]=r=>a(c).currentLang=r),k],options:a(c).langOption},null,8,["value","options"])]),o("div",ae,[o("header",re,[o("h2",null,_(a(s)("login")),1)]),o("form",null,[o("div",ce,[b(o("input",{onKeydown:V,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value.phone=r),type:"text",onInput:e[2]||(e[2]=r=>$()),required:"",maxlength:"19"},null,544),[[S,n.value.phone]]),o("span",null,_(a(s)("phone")),1)]),o("div",ie,[b(o("input",{ref_key:"passwordInput",ref:d,"onUpdate:modelValue":e[3]||(e[3]=r=>n.value.password=r),onKeydown:E,type:"password",required:""},null,544),[[S,n.value.password]]),o("span",null,_(a(s)("password")),1),o("div",ue,[C(A,{size:"22"},{default:O(()=>[m.value?(u(),z(a(ne),{key:1,onClick:e[5]||(e[5]=r=>y(!1))})):(u(),z(a(X),{key:0,onClick:e[4]||(e[4]=r=>y(!0))}))]),_:1})])]),pe,o("div",de,[o("button",{type:"button",onClick:x},_(a(s)("enter")),1)])])]),he,_e,fe,ve])}}},$e=w(ge,[["__scopeId","data-v-35f3fdc9"]]);export{$e as default};
