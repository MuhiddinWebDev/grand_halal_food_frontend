import{R as O}from"./refresh-l-BsjCMQ.js";import{D as z}from"./delete-KjMN84f2.js";import{O as p,d as D,h as V,e as q,H as j,r as S,j as M,o as c,c as d,a as s,l as u,m as r,p as e,q as R,P as b,Q as C,N as $,G as i,t as n,J as y,T,U}from"./index-lszqCMqc.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const _="/order";class E{all(a){return p.get(_+"/all").then(l=>l)}create(a){return p.post(_+"/",a).then(l=>l)}update(a,l){return p.patch(_+`/${a}`,l).then(h=>h)}getOne(a){return p.get(_+`/${a}`).then(l=>l)}delete(a){return p.delete(_+`/${a}`).then(l=>l)}}const v=new E,G={class:"space-y-4 p-4"},J={class:"flex justify-between items-center"},L=s("h2",{class:"text-2xl font-bold"},"Buyurtmalar",-1),P={key:0},A=s("strong",null,"Joylashuv:",-1),F=s("strong",null,"Vaqti:",-1),H={class:"mt-2 space-y-1"},Q=s("h4",{class:"font-semibold"},"Mahsulotlar:",-1),X={class:"flex justify-end gap-2 mt-4"},ee={__name:"Index",setup(w){const{t:a,locale:l}=D(),h=V(),B=q(),g=j(),k=S([]),f=S(!1),m=async()=>{f.value=!0;try{k.value=await v.all()}finally{f.value=!1}},I=async(x,N)=>{try{await v.updateStatus(x,{status:N}),g.success("Status yangilandi")}catch{g.error("Xatolik yuz berdi")}};return M(()=>m()),(x,N)=>(c(),d("div",G,[s("div",J,[L,u(e(y),{type:"warning",onClick:m},{icon:r(()=>[u(e($),null,{default:r(()=>[u(e(O))]),_:1})]),default:r(()=>[i(" "+n(e(a)("update")),1)]),_:1})]),f.value?(c(),d("div",P,"Yuklanmoqda...")):R("",!0),(c(!0),d(b,null,C(k.value,t=>(c(),d("div",{key:t.id},[u(e(U),{title:`${t.client.first_name} ${t.client.last_name}`,size:"medium"},{"header-extra":r(()=>[u(e(T),{value:t.status,"onUpdate:value":[o=>t.status=o,o=>I(t.id,o)],options:e(h).orderStatus,"label-field":"label_"+e(l),size:"small"},null,8,["value","onUpdate:value","options","label-field"])]),default:r(()=>[s("p",null,[s("strong",null,n(e(a)("phone"))+":",1),i(" "+n(t.client.phone_number),1)]),s("p",null,[s("strong",null,n(e(a)("address"))+":",1),i(" "+n(t.address),1)]),s("p",null,[A,i(" "+n(t.lat)+", "+n(t.long),1)]),s("p",null,[F,i(" "+n(new Date(t.createdAt).toLocaleString()),1)]),s("div",H,[Q,s("ul",null,[(c(!0),d(b,null,C(t.items,o=>(c(),d("li",{key:o.id},n(o.product.name)+" - "+n(o.quantity)+" x "+n(o.price)+" so'm ",1))),128))])]),s("div",X,[u(e(y),{size:"small",type:"info",onClick:o=>e(B).push(`/orders/${t.id}`)},{default:r(()=>[i(" Batafsil ")]),_:2},1032,["onClick"]),u(e(y),{size:"small",type:"error",onClick:o=>e(v).delete(t.id).then(m)},{icon:r(()=>[u(e($),null,{default:r(()=>[u(e(z))]),_:1})]),default:r(()=>[i(" O'chirish ")]),_:2},1032,["onClick"])])]),_:2},1032,["title"])]))),128))]))}};export{ee as default};
