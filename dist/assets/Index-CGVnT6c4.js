import{P as F}from"./pen-C3gQb1Oq.js";import{O as w,b as I,r as y,g as O,k as _,p as j,o as $,j as l,i as s,a as t,v as m,s as o,G as g,c as B,R as G,S as L,L as M,N as P,V as z}from"./index-C64ZonsX.js";import{S as K}from"./save-Bxv9OlXA.js";import{E as T}from"./exit-BZ-cbgC6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const b="/offerta";class Z{all(){return w.get(b+"/all").then(r=>r)}create(r){return w.post(b+"/create",r).then(a=>a)}update(r,a){return w.patch(b+`/update/${r}`,a).then(x=>x)}getOne(r){return w.get(b+`/getById/${r}`).then(a=>a)}delete(r){return w.delete(b+`/delete/${r}`).then(a=>a)}}const S=new Z,A={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0"},q={class:"text-xl font-semibold"},H={class:"flex gap-2"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},E={__name:"Form",props:{type:String,id:[String,Number]},emits:["update","close"],setup(U,{emit:r}){const{t:a}=I(),x=U,p=r,h=y(null),f=y(!1),u=y({text_uz:"",text_ru:"",text_ko:"",text_en:""}),N={};O(async()=>{if(x.type==="update"&&x.id)try{const i=await S.getOne(x.id);u.value=i}catch(i){console.error("Ma'lumot yuklashda xatolik:",i)}});const c=async()=>{try{if(f.value=!0,x.type==="update"){const i=await S.update(x.id,u.value);p("update",i)}}catch(i){console.warn("Form not valid or failed",i)}finally{f.value=!1}},e=()=>p("close");return(i,d)=>{const n=_("n-icon"),R=_("n-button"),k=_("n-input"),C=_("n-form-item"),D=_("n-spin"),V=_("n-form");return $(),j(V,{ref_key:"formRef",ref:h,model:u.value,rules:N},{default:l(()=>[s(D,{show:f.value},{default:l(()=>[t("div",A,[t("p",q,m(o(a)("general offerta"))+" "+m(o(a)("change").toLowerCase()),1),t("div",H,[s(R,{onClick:c,type:"success",disabled:f.value,class:"min-w-[120px]"},{icon:l(()=>[s(n,null,{default:l(()=>[s(o(K))]),_:1})]),default:l(()=>[g(" "+m(o(a)("save"))+" ",1),d[4]||(d[4]=t("span",{class:"text-xs ml-1"},"Enter",-1))]),_:1,__:[4]},8,["disabled"]),s(R,{onClick:e,type:"warning",class:"min-w-[120px]"},{icon:l(()=>[s(n,null,{default:l(()=>[s(o(T))]),_:1})]),default:l(()=>[g(" "+m(o(a)("exit"))+" ",1),d[5]||(d[5]=t("span",{class:"text-xs ml-1"},"Esc",-1))]),_:1,__:[5]})])]),t("div",J,[s(C,{label:o(a)("text")+" UZB",path:"text_uz"},{default:l(()=>[s(k,{type:"textarea",style:{width:"100%"},value:u.value.text_uz,"onUpdate:value":d[0]||(d[0]=v=>u.value.text_uz=v),autosize:{minRows:12,minCols:50}},null,8,["value"])]),_:1},8,["label"]),s(C,{label:o(a)("text")+" RUS",path:"text_ru"},{default:l(()=>[s(k,{type:"textarea",style:{width:"100%"},value:u.value.text_ru,"onUpdate:value":d[1]||(d[1]=v=>u.value.text_ru=v),autosize:{minRows:12,minCols:50}},null,8,["value"])]),_:1},8,["label"]),s(C,{label:o(a)("text")+" KOR",path:"text_ko"},{default:l(()=>[s(k,{type:"textarea",style:{width:"100%"},value:u.value.text_ko,"onUpdate:value":d[2]||(d[2]=v=>u.value.text_ko=v),autosize:{minRows:12,minCols:50}},null,8,["value"])]),_:1},8,["label"]),s(C,{label:o(a)("text")+" ENG",path:"text_en"},{default:l(()=>[s(k,{type:"textarea",style:{width:"100%"},value:u.value.text_en,"onUpdate:value":d[3]||(d[3]=v=>u.value.text_en=v),autosize:{minRows:12,minCols:50}},null,8,["value"])]),_:1},8,["label"])])]),_:1},8,["show"])]),_:1},8,["model"])}}},Q={class:"p-4 space-y-4 bg-white rounded-xl shadow-md"},W={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},X={class:"text-xl font-bold"},Y={class:"flex justify-between items-center"},ee={class:"grid md:grid-cols-2 gap-2"},te={class:"rounded-xl border border-gray-300 bg-gray-50 p-4 shadow-sm space-y-2"},se={class:"text-base font-semibold text-gray-700 flex items-center gap-2"},oe={class:"text-xl"},ae={class:"rounded-xl border border-gray-300 bg-gray-50 p-4 shadow-sm space-y-2"},le={class:"text-base font-semibold text-gray-700 flex items-center gap-2"},ne={class:"text-xl"},re={class:"rounded-xl border border-gray-300 bg-gray-50 p-4 shadow-sm space-y-2"},de={class:"text-base font-semibold text-gray-700 flex items-center gap-2"},ue={class:"text-xl"},ie={class:"rounded-xl border border-gray-300 bg-gray-50 p-4 shadow-sm space-y-2"},pe={class:"text-base font-semibold text-gray-700 flex items-center gap-2"},ce={class:"text-xl"},ge={__name:"Index",setup(U){const{t:r}=I(),a=y([]),x=y(!1),p=y({create:!1,update:!1,update_id:null}),h=c=>{x.value=!0,S.all().then(e=>{a.value=e,x.value=!1,c&&(p.value[c]=!1)})},f=c=>p.value[c]=!1,u=c=>h(c),N=c=>{p.value.update_id=c,p.value.update=!0};return O(()=>{h()}),(c,e)=>{const i=_("n-code"),d=_("n-modal");return $(),B("div",Q,[t("div",W,[t("h2",X,m(o(r)("general offerta")),1)]),($(!0),B(G,null,L(a.value,n=>($(),j(o(z),{key:n.id},{header:l(()=>[t("div",Y,[t("span",null,"#"+m(n.id),1),s(o(M),{type:"success",size:"small",onClick:R=>N(n.id)},{icon:l(()=>[s(o(P),{component:o(F)},null,8,["component"])]),_:2},1032,["onClick"])])]),default:l(()=>[t("div",ee,[t("div",te,[t("div",se,[t("span",oe,m(o(r)("text")),1),e[6]||(e[6]=g()),e[7]||(e[7]=t("span",null,"UZB:",-1))]),s(i,{code:n.text_uz,language:"text","word-wrap":"",class:"text-sm"},null,8,["code"])]),t("div",ae,[t("div",le,[t("span",ne,m(o(r)("text")),1),e[8]||(e[8]=g()),e[9]||(e[9]=t("span",null,"RUS:",-1))]),s(i,{code:n.text_ru,language:"text","word-wrap":"",class:"text-sm"},null,8,["code"])]),t("div",re,[t("div",de,[t("span",ue,m(o(r)("text")),1),e[10]||(e[10]=g()),e[11]||(e[11]=t("span",null,"KOR:",-1))]),s(i,{code:n.text_ko,language:"text","word-wrap":"",class:"text-sm"},null,8,["code"])]),t("div",ie,[t("div",pe,[t("span",ce,m(o(r)("text")),1),e[12]||(e[12]=g()),e[13]||(e[13]=t("span",null,"ENG:",-1))]),s(i,{code:n.text_en,language:"text","word-wrap":"",class:"text-sm"},null,8,["code"])])])]),_:2},1024))),128)),s(d,{"transform-origin":"center",show:p.value.create,"onUpdate:show":e[2]||(e[2]=n=>p.value.create=n)},{default:l(()=>[s(o(z),{bordered:!1,role:"dialog","aria-modal":"true"},{default:l(()=>[s(E,{onClose:e[0]||(e[0]=n=>f("create")),onCreate:e[1]||(e[1]=n=>u("create")),type:"create"})]),_:1})]),_:1},8,["show"]),s(d,{"transform-origin":"center",show:p.value.update,"onUpdate:show":e[5]||(e[5]=n=>p.value.update=n)},{default:l(()=>[s(o(z),{bordered:!1,role:"dialog","aria-modal":"true"},{default:l(()=>[s(E,{type:"update",id:p.value.update_id,onClose:e[3]||(e[3]=n=>f("update")),onUpdate:e[4]||(e[4]=n=>u("update"))},null,8,["id"])]),_:1})]),_:1},8,["show"])])}}};export{ge as default};
