import{R as V}from"./refresh-DIHAZP8H.js";import{D as Y}from"./delete-Bpd1-14p.js";import{O as h,d as R,f as G,H,r as C,h as U,c as d,a as t,s as M,j as i,k as u,t as e,L as x,Q as N,R as $,x as l,p as E,n as F,l as J,o as c,G as p,N as B,U as L,V as T}from"./index-mXaGZWKH.js";import{c as j}from"./NumberFormat-Dorb8or7.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const m="/order";class P{all(s){return h.get(m+"/all").then(o=>o)}create(s){return h.post(m+"/",s).then(o=>o)}update(s,o){return h.patch(m+`/${s}`,o).then(_=>_)}getOne(s){return h.get(m+`/${s}`).then(o=>o)}delete(s){return h.delete(m+`/${s}`).then(o=>o)}}const v=new P,Q={class:"space-y-4 p-4"},X={class:"flex justify-between items-center"},A={key:0},K={class:"space-y-4 grid grid-cols-1 md:grid-cols-2 gap-4"},W=["href"],Z=["href"],tt={class:"mt-2 space-y-1"},et={class:"font-semibold text-lg text-bold-700"},st={style:{width:"50px","text-align":"center"}},lt={class:"text-right"},nt={class:"text-right"},at={class:"text-right"},ot={class:"flex justify-end gap-2 mt-4"},rt={key:1,class:"flex flex-col items-center justify-center p-6 bg-gray-100 rounded-2xl border border-dashed border-gray-300 shadow-sm"},it={class:"text-gray-600 text-lg font-medium"},mt={__name:"Index",setup(z){const{t:s,locale:o}=R(),_=G(),D=E(),b=H(),g=C([]),f=C(!1),I=F("dayJS"),y=async()=>{f.value=!0;try{g.value=await v.all()}finally{f.value=!1}},O=async(k,n)=>{try{await v.updateStatus(k,{status:n}),b.success("Status yangilandi")}catch{b.error("Xatolik yuz berdi")}};return U(()=>y()),(k,n)=>{const w=J("n-table");return c(),d("div",Q,[t("div",X,[n[0]||(n[0]=t("h2",{class:"text-2xl font-bold"},"Buyurtmalar",-1)),i(e(x),{type:"warning",onClick:y},{icon:u(()=>[i(e(B),null,{default:u(()=>[i(e(V))]),_:1})]),default:u(()=>[p(" "+l(e(s)("update")),1)]),_:1})]),f.value?(c(),d("div",A,"Yuklanmoqda...")):M("",!0),t("div",K,[(c(!0),d(N,null,$(g.value,a=>(c(),d("div",{key:a.id},[i(e(T),{title:`${e(s)("order")} #${a.id} ${a.client.first_name} ${a.client.last_name}`,size:"medium"},{"header-extra":u(()=>[i(e(L),{value:a.status,"onUpdate:value":[r=>a.status=r,r=>O(a.id,r)],options:e(_).orderStatus,"label-field":"label_"+e(o),size:"small"},null,8,["value","onUpdate:value","options","label-field"])]),default:u(()=>[t("p",null,[t("strong",null,l(e(s)("datetime"))+":",1),p(" "+l(e(I)(a.datetime).format("YYYY-MM-DD HH:mm:ss")),1)]),t("p",null,[t("strong",null,l(e(s)("phone"))+":",1),n[1]||(n[1]=p()),t("a",{href:"tel:"+a.client.phone_number,class:"text-blue-500"},l(a.client.phone_number),9,W)]),t("p",null,[t("strong",null,l(e(s)("additional phone number"))+":",1),n[2]||(n[2]=p()),t("a",{href:"tel:"+a.phone2,class:"text-blue-500"},l(a.phone2),9,Z)]),t("p",null,[t("strong",null,l(e(s)("address"))+":",1),p(" "+l(a.address),1)]),t("p",null,[t("strong",null,l(e(s)("location"))+":",1),n[3]||(n[3]=t("a",{class:"text-blue-500",href:"https://www.google.com/maps?q={{order.lat}},{{order.lon}}",target:"_blank",style:{"text-decoration":"none"}}," 📍 Google Map ",-1))]),t("div",tt,[t("h2",et,l(e(s)("products"))+":",1),i(w,{size:"small",bordered:!0,"single-line":!1},{default:u(()=>[t("thead",null,[t("tr",null,[n[4]||(n[4]=t("th",{style:{width:"50px","text-align":"center"}},"№",-1)),t("th",null,l(e(s)("product")),1),t("th",null,l(e(s)("quantity")),1),t("th",null,l(e(s)("price")),1),t("th",null,l(e(s)("total")+" "+e(s)("summa")),1)])]),t("tbody",null,[(c(!0),d(N,null,$(a.items,(r,q)=>{var S;return c(),d("tr",{key:r.id},[t("td",st,l(q+1),1),t("td",null,l((S=r.product)==null?void 0:S["title_"+e(o)]),1),t("td",lt,l(r.quantity),1),t("td",nt,l(e(j)(r.price)),1),t("td",at,l(e(j)(r.price*r.quantity)),1)])}),128))])]),_:2},1024)]),t("div",ot,[i(e(x),{size:"small",type:"info",onClick:r=>e(D).push(`/orders/${a.id}`)},{default:u(()=>n[5]||(n[5]=[p(" Batafsil ")])),_:2,__:[5]},1032,["onClick"]),i(e(x),{size:"small",type:"error",onClick:r=>e(v).delete(a.id).then(y)},{icon:u(()=>[i(e(B),null,{default:u(()=>[i(e(Y))]),_:1})]),default:u(()=>[n[6]||(n[6]=p(" O'chirish "))]),_:2,__:[6]},1032,["onClick"])])]),_:2},1032,["title"])]))),128))]),!f.value&&g.value.length===0?(c(),d("div",rt,[n[7]||(n[7]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3h18M3 7h18M5 11h14M7 15h10M9 19h6"})],-1)),t("p",it,l(e(s)("order not available")),1)])):M("",!0)])}}};export{mt as default};
