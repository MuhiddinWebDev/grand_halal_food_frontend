import{c as C,o as d,Q as A,b as P,e as $,u as D,r as i,g as K,a as t,i as _,s as l,k as y,v as p,Y as x,Z as k,j as O,O as U,n as j,p as I}from"./index-C64ZonsX.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as q}from"./eye-Dda92Wi_.js";import{M as G}from"./logo-BKOx-S1n.js";const Q={},R={class:"main-icons"};function T(M,s){return d(),C("div",R,s[0]||(s[0]=[A('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M63.998 86.004l21.998-21.998L448 426.01l-21.998 21.998z" fill="currentColor"></path><path d="M259.34 192.09l60.57 60.57a64.07 64.07 0 0 0-60.57-60.57z" fill="currentColor"></path><path d="M252.66 319.91l-60.57-60.57a64.07 64.07 0 0 0 60.57 60.57z" fill="currentColor"></path><path d="M256 352a96 96 0 0 1-92.6-121.34l-69.07-69.08C66.12 187.42 39.24 221.14 16 256c26.42 44 62.56 89.24 100.2 115.18C159.38 400.92 206.33 416 255.76 416A233.47 233.47 0 0 0 335 402.2l-53.61-53.6A95.84 95.84 0 0 1 256 352z" fill="currentColor"></path><path d="M256 160a96 96 0 0 1 92.6 121.34L419.26 352c29.15-26.25 56.07-61.56 76.74-96c-26.38-43.43-62.9-88.56-101.18-114.82C351.1 111.2 304.31 96 255.76 96a222.92 222.92 0 0 0-78.21 14.29l53.11 53.11A95.84 95.84 0 0 1 256 160z" fill="currentColor"></path></svg>',1)]))}const Y=L(Q,[["render",T]]),Z={class:"form_body"},F={class:"lang-top"},H={class:"contact-wrapper"},J={class:"flex items-center justify-center shadow-2xs"},W=["src"],X={class:"login-cta"},ee={class:"form-row"},te=["placeholder"],oe={class:"form-row"},ne={class:"input-icon"},se={class:"form-row"},le={__name:"Index",setup(M){const{t:s,locale:v}=P(),a=$(),b=D(),z=j(),u=i(null),h=i(!1),n=i({phone:"+",password:""}),S=i(0),E=i(null),f=o=>{b.warning({title:s("warning"),content:o,duration:2e3})},g=async()=>{let o=n.value.phone.replace(/[^\d]/g,"");if(o.length<12&&n.value.password.length<3)f(s("rule_full"));else if(n.value.password.length<3)f(s("rule_pass"));else if(o.length<12)f(s("rule_num"));else if(o.length>=12&&n.value.password.length>=4)try{n.value.phone=n.value.phone.replace(/[^\d]/g,""),U.post("users/login",n.value).then(e=>{localStorage.setItem("token",e.token),localStorage.setItem("role",e.role),a.currentData=e,a.currentLang=e.lang||"uz";let c="/home";e.role=="Inspector"&&(c="/sklad-table"),z.push({path:c})}).catch(e=>{S.value=0})}catch{}},N=o=>{o.key=="Enter"&&g()},B=o=>{let e=n.value.phone.replace(/[^\d]/g,"");o.key=="Enter"&&e.length>=12&&u.value.focus()},w=o=>{h.value=o,o?u.value.type="text":u.value.type="password"},m=o=>{localStorage.setItem("lang",o),v.value=o,a.currentLang=o};return K(()=>{m(a.currentLang)}),(o,e)=>{const c=y("n-select"),V=y("n-icon");return d(),C("div",Z,[t("div",F,[_(c,{style:{width:"150px"},value:l(a).currentLang,"onUpdate:value":[e[0]||(e[0]=r=>l(a).currentLang=r),m],options:l(a).langOption},null,8,["value","options"])]),t("div",H,[t("div",J,[t("img",{class:"logo",style:{width:"200px"},src:l(G),alt:"logo"},null,8,W)]),t("header",X,[t("h2",null,p(l(s)("login")),1)]),t("form",null,[t("div",ee,[x(t("input",{onKeydown:B,"onUpdate:modelValue":e[1]||(e[1]=r=>n.value.phone=r),type:"text",required:"",maxlength:"19",ref_key:"phoneInput",ref:E,placeholder:l(v)=="uz"?"+998":"+82"},null,40,te),[[k,n.value.phone]]),t("span",null,p(l(s)("phone")),1)]),t("div",oe,[x(t("input",{ref_key:"passwordInput",ref:u,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value.password=r),onKeydown:N,type:"password",required:""},null,544),[[k,n.value.password]]),t("span",null,p(l(s)("password")),1),t("div",ne,[_(V,{size:"22"},{default:O(()=>[h.value?(d(),I(l(Y),{key:1,onClick:e[4]||(e[4]=r=>w(!1))})):(d(),I(l(q),{key:0,onClick:e[3]||(e[3]=r=>w(!0))}))]),_:1})])]),e[5]||(e[5]=t("div",{class:"form-row"},null,-1)),t("div",se,[t("button",{type:"button",onClick:g},p(l(s)("enter")),1)])])]),e[6]||(e[6]=t("div",{class:"circle one"},null,-1)),e[7]||(e[7]=t("div",{class:"circle two"},null,-1)),e[8]||(e[8]=t("div",{class:"circle three"},null,-1)),e[9]||(e[9]=t("div",{class:"circle four"},null,-1))])}}},ce=L(le,[["__scopeId","data-v-afd527e8"]]);export{ce as default};
