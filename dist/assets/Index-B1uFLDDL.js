import{u as V}from"./index-BuwZsw5p.js";import{R as q}from"./refresh-C64adBlx.js";import{P as G}from"./pen-Bx9jLVDb.js";import{y as w,d as $,n as P,r as g,h as O,l as _,q as Z,o as D,k as n,j as t,a as p,x,t as o,I as C,g as F,m as N,O as S,N as I,D as L,c as T}from"./index-DWxUX1dU.js";import{S as A,E as H}from"./exit-yk3TINHu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const y="/plastic-card";class J{all(){return w.get(y+"/all").then(s=>s)}create(s){return w.post(y+"/create",s).then(l=>l)}update(s,l){return w.patch(y+`/update/${s}`,l).then(i=>i)}getOne(s){return w.get(y+`/getById/${s}`).then(l=>l)}delete(s){return w.delete(y+`/delete/${s}`).then(l=>l)}}const U=new J,Q={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0"},W={class:"text-xl font-semibold"},X={class:"flex gap-2"},Y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},te={__name:"Form",props:{type:String,id:[String,Number]},emits:["create","update","close"],setup(z,{emit:s}){const{t:l}=$();P("fileUrl");const i=z,f=s,b=g(null),d=g(!1),a=g({number:null,name_uz:"",name_ru:"",name_ko:"",name_en:"",comment_uz:"",comment_ru:"",comment_ko:"",comment_en:""}),v=()=>({required:!0,trigger:"blur",validator:(u,e)=>{if(!e)return new Error(l("input require"))}}),E={number:v(),name_uz:v(),name_ko:v(),name_ru:v(),name_en:v()};O(async()=>{if(i.type==="update"&&i.id)try{const u=await U.getOne(i.id);a.value=u}catch(u){console.error("Ma'lumot yuklashda xatolik:",u)}});const R=async()=>{var u;try{if(await((u=b.value)==null?void 0:u.validate()),d.value=!0,i.type==="create"){const e=await U.create(a.value);f("create",e)}else if(i.type==="update"){const e=await U.update(i.id,a.value);f("update",e)}}catch(e){console.warn("Form not valid or failed",e)}finally{d.value=!1}},B=()=>f("close");return(u,e)=>{const h=_("n-icon"),k=_("n-button"),c=_("n-input"),m=_("n-form-item"),j=_("n-divider"),K=_("n-spin"),M=_("n-form");return D(),Z(M,{ref_key:"formRef",ref:b,model:a.value,rules:E},{default:n(()=>[t(K,{show:d.value},{default:n(()=>[p("div",Q,[p("p",W,x(o(l)("plastic card"))+" "+x(i.type=="create"?o(l)("add").toLowerCase():o(l)("change").toLowerCase()),1),p("div",X,[t(k,{onClick:R,type:"success",disabled:d.value,class:"min-w-[120px]"},{icon:n(()=>[t(h,null,{default:n(()=>[t(o(A))]),_:1})]),default:n(()=>[C(" "+x(o(l)("save"))+" ",1),e[9]||(e[9]=p("span",{class:"text-xs ml-1"},"Enter",-1))]),_:1,__:[9]},8,["disabled"]),t(k,{onClick:B,type:"warning",class:"min-w-[120px]"},{icon:n(()=>[t(h,null,{default:n(()=>[t(o(H))]),_:1})]),default:n(()=>[C(" "+x(o(l)("exit"))+" ",1),e[10]||(e[10]=p("span",{class:"text-xs ml-1"},"Esc",-1))]),_:1,__:[10]})])]),t(m,{label:o(l)("plastic card"),path:"number"},{default:n(()=>[t(c,{value:a.value.number,"onUpdate:value":e[0]||(e[0]=r=>a.value.number=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),p("div",Y,[t(m,{label:o(l)("name")+" UZB",path:"name_uz"},{default:n(()=>[t(c,{value:a.value.name_uz,"onUpdate:value":e[1]||(e[1]=r=>a.value.name_uz=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(m,{label:o(l)("name")+" KOR",path:"name_ko"},{default:n(()=>[t(c,{value:a.value.name_ko,"onUpdate:value":e[2]||(e[2]=r=>a.value.name_ko=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(m,{label:o(l)("name")+" RUS",path:"name_ru"},{default:n(()=>[t(c,{value:a.value.name_ru,"onUpdate:value":e[3]||(e[3]=r=>a.value.name_ru=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(m,{label:o(l)("name")+" ENG",path:"name_en"},{default:n(()=>[t(c,{value:a.value.name_en,"onUpdate:value":e[4]||(e[4]=r=>a.value.name_en=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"])]),t(j,{style:{margin:"8px 0"}}),p("div",ee,[t(m,{label:o(l)("comment")+" UZB",path:"comment_uz"},{default:n(()=>[t(c,{type:"textarea",value:a.value.comment_uz,"onUpdate:value":e[5]||(e[5]=r=>a.value.comment_uz=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(m,{label:o(l)("comment")+" KOR",path:"comment_ko"},{default:n(()=>[t(c,{type:"textarea",value:a.value.comment_ko,"onUpdate:value":e[6]||(e[6]=r=>a.value.comment_ko=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(m,{label:o(l)("comment")+" RUS",path:"comment_ru"},{default:n(()=>[t(c,{type:"textarea",value:a.value.comment_ru,"onUpdate:value":e[7]||(e[7]=r=>a.value.comment_ru=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),t(m,{label:o(l)("comment")+" ENG",path:"comment_en"},{default:n(()=>[t(c,{type:"textarea",value:a.value.comment_en,"onUpdate:value":e[8]||(e[8]=r=>a.value.comment_en=r),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"])])]),_:1},8,["show"])]),_:1},8,["model"])}}},ae={class:"p-2 space-y-2 bg-white rounded-xl shadow-md overflow-x-auto"},le={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ne={class:"text-xl font-bold"},oe={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},ce={__name:"Index",setup(z){const{t:s}=$(),{shift:l,r:i}=V(),f=g([]),b=g(!1),d=g({update:!1,update_id:null}),a=u=>{b.value=!0,U.all().then(e=>{f.value=e,b.value=!1,u&&(d.value[u]=!1)})},v=F(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(u,e)=>e+1},{title:s("plastic card"),key:"number"},{title:s("name")+" UZB",key:"name_uz"},{title:s("name")+" KOR",key:"name_ko"},{title:s("name")+" RUS",key:"name_ru"},{title:s("name")+" ENG",key:"name_en"},{title:s("action"),key:"action",align:"center",fixed:"right",width:160,render(u){return[N(S,{size:"small",type:"success",onClick:e=>{d.value.update_id=u.id,d.value.update=!0},style:{marginRight:"8px"}},{icon:()=>N(I,{component:G,size:22})})]}}]),E=()=>{a()},R=u=>d.value[u]=!1,B=u=>a(u);return L(()=>{l.value&&i.value&&a()}),O(()=>a()),(u,e)=>{const h=_("n-data-table"),k=_("n-card"),c=_("n-modal");return D(),T("div",ae,[p("div",le,[p("h2",ne,x(o(s)("plastic card")),1),p("div",oe,[t(o(S),{type:"warning",onClick:E},{icon:n(()=>[t(o(I),null,{default:n(()=>[t(o(q))]),_:1})]),default:n(()=>[C(" "+x(o(s)("update"))+" ",1),e[3]||(e[3]=p("span",{class:"ml-1 text-xs"},"Shift+R",-1))]),_:1,__:[3]})])]),t(h,{loading:b.value,columns:v.value,data:f.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)"},null,8,["loading","columns","data"]),t(c,{"transform-origin":"center",show:d.value.update,"onUpdate:show":e[2]||(e[2]=m=>d.value.update=m)},{default:n(()=>[t(k,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:n(()=>[t(te,{type:"update",id:d.value.update_id,onClose:e[0]||(e[0]=m=>R("update")),onUpdate:e[1]||(e[1]=m=>B("update"))},null,8,["id"])]),_:1})]),_:1},8,["show"])])}}};export{ce as default};
