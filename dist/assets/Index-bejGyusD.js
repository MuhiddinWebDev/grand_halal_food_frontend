import{O as r,d as Y,e as j,g as E,H as J,h as O,r as c,i as T,I as V,w as $,C as G,j as K,k as v,o as F,c as L,a as g,t as w,p as s,l as n,m as i,N as b,G as q,J as Q,v as y,x as f,K as W,L as X}from"./index-lszqCMqc.js";import{u as Z}from"./index-ZHZK-JzO.js";import{R as ee}from"./refresh-l-BsjCMQ.js";import{S as te}from"./search-Jp_syMCz.js";import{u as ae}from"./NumberFormat-N2x_sffK.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const u="/client";class se{all(t){let a=t!=null&&t.text?"?text="+t.text:"";return r.get(u+"/all"+a).then(o=>o)}create(t){return r.post(u+"/",t).then(a=>a)}update(t,a){return r.patch(u+`/${t}`,a).then(o=>o)}getOne(t){return r.get(u+`/${t}`).then(a=>a)}delete(t){return r.delete(u+`/${t}`).then(a=>a)}}const ne=new se,le={class:"p-2 space-y-2"},oe={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},re={class:"text-xl font-bold"},ce={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},ie=g("span",{class:"ml-1 text-xs"},"Shift+R",-1),he={__name:"Index",setup(S){const{t,locale:a}=Y(),{insert:o,shift:N,r:k}=Z(),I=y("dayJS");j(),E(),J(),O();const z=y("fileUrl"),x=c([]),h=c(!1);c(!1);const d=c({text:""}),_=c({create:!1,update:!1,update_id:null}),p=e=>{h.value=!0,ne.all(d.value).then(l=>{x.value=l,h.value=!1,e&&(_.value[e]=!1)})},D=T(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(e,l)=>l+1},{title:t("fullname"),key:"fullname",render(e){return f("div",{class:"flex items-center"},[e.image?f(W,{src:z+e.image,height:35,width:50,style:{borderRadius:"35px",marginRight:"8px"},lazy:!0,previewDisabled:!0}):f(X,{size:"small",style:{marginRight:"8px"}}),f("span",{class:"font-semibold"},e.fullname)])}},{title:t("phone"),key:"phone",render:e=>ae(e.phone_number)},{title:t("login")+" / "+t("datetime"),key:"login",render:e=>I(e.datetime).format("YYYY-MM-DD HH:mm:ss")}]),m=V({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:e=>m.page=e,onUpdatePageSize:e=>{m.pageSize=e,m.page=1}}),C=e=>({style:"cursor: pointer;"}),R=e=>e.status?"":"bg-red-50",M=()=>p(),B=()=>{d.value.text="",p()},P=()=>_.value.create=!0;return $(o,e=>e&&P()),G(()=>{N.value&&k.value&&p()}),K(()=>p()),(e,l)=>{const A=v("n-input"),H=v("n-data-table");return F(),L("div",le,[g("div",oe,[g("h2",re,w(s(t)("client")),1),g("div",ce,[n(A,{value:d.value.text,"onUpdate:value":l[0]||(l[0]=U=>d.value.text=U),onInput:M,placeholder:s(t)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:i(()=>[n(s(b),null,{default:i(()=>[n(s(te))]),_:1})]),_:1},8,["value","placeholder"]),n(s(Q),{type:"warning",onClick:B},{icon:i(()=>[n(s(b),null,{default:i(()=>[n(s(ee))]),_:1})]),default:i(()=>[q(" "+w(s(t)("update"))+" ",1),ie]),_:1})])]),n(H,{"row-props":C,pagination:m,loading:h.value,columns:D.value,data:x.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)","row-class-name":R},null,8,["pagination","loading","columns","data"])])}}};export{he as default};
