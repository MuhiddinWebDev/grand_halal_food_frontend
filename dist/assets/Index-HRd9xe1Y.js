import{x as R,u as L,r as m,i as Z,j as p,o as F,m as J,l as n,k as e,a as _,t as S,n as o,G as T,d as Q,f as W,H as X,g as Y,h as ee,I as te,w as ae,C as le,c as ne,N,J as M,s as oe,v as w,K as se,L as re}from"./index-QnmIrJnq.js";import{u as ie,S as ue}from"./index-G22rleYZ.js";import{S as ce,E as de,A as pe,P as _e,D as me}from"./delete-CSz34Se1.js";import{R as fe}from"./refresh-0ndPe-2D.js";import{c as ve}from"./category.service-3IueZmRh.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const $="/brand";class ge{all(t){let s=t!=null&&t.text?"?text="+t.text:"";return R.get($+"/all"+s).then(h=>h)}create(t){return R.post($+"/create",t).then(s=>s)}update(t,s){return R.patch($+`/update/${t}`,s).then(h=>h)}getOne(t){return R.get($+`/getById/${t}`).then(s=>s)}delete(t){return R.delete($+`/delete/${t}`).then(s=>s)}}const E=new ge,ye={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0"},xe={class:"text-xl font-semibold"},we={class:"flex gap-2"},he=_("span",{class:"text-xs ml-1"},"Enter",-1),be=_("span",{class:"text-xs ml-1"},"Esc",-1),ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},q={__name:"Form",props:{type:String,id:[String,Number]},emits:["create","update","close"],setup(j,{emit:t}){const{t:s,locale:h}=L(),f=j,U=t,B=m(null),C=m(!1),K=m(null),D=m([]),u=m({title_uz:"",title_ru:"",title_kr:"",title_en:"",category_id:null}),P=()=>{ve.all().then(r=>{D.value=r})},v=r=>({required:!0,trigger:"blur",validator:(i,I)=>{if(!I)return new Error(s(r==="image"?"require_image":"require_name"))}}),z={title_uz:v("title_uz"),title_kr:v("title_kr"),title_ru:v("title_ru"),title_en:v("title_en"),image:v("image")};Z(async()=>{if(P(),f.type==="update"&&f.id)try{const r=await E.getOne(f.id);u.value=r}catch(r){console.error("Ma'lumot yuklashda xatolik:",r)}setTimeout(()=>{var r;(r=K.value)==null||r.focus()},100)});const d=async()=>{var r;try{if(await((r=B.value)==null?void 0:r.validate()),C.value=!0,f.type==="create"){const i=await E.create(u.value);U("create",i)}else if(f.type==="update"){const i=await E.update(f.id,u.value);U("update",i)}}catch(i){console.warn("Form not valid or failed",i)}finally{C.value=!1}},y=()=>U("close"),b=r=>{r.code==="Enter"&&d()};return(r,i)=>{const I=p("n-icon"),A=p("n-button"),O=p("n-select"),x=p("n-form-item"),k=p("n-input"),l=p("n-spin"),a=p("n-form");return F(),J(a,{ref_key:"formRef",ref:B,model:u.value,rules:z},{default:n(()=>[e(l,{show:C.value},{default:n(()=>[_("div",ye,[_("p",xe,S(o(s)("brand"))+" "+S(f.type=="create"?o(s)("add").toLowerCase():o(s)("change").toLowerCase()),1),_("div",we,[e(A,{onClick:d,type:"success",disabled:C.value,class:"min-w-[120px]"},{icon:n(()=>[e(I,null,{default:n(()=>[e(o(ce))]),_:1})]),default:n(()=>[T(" "+S(o(s)("save"))+" ",1),he]),_:1},8,["disabled"]),e(A,{onClick:y,type:"warning",class:"min-w-[120px]"},{icon:n(()=>[e(I,null,{default:n(()=>[e(o(de))]),_:1})]),default:n(()=>[T(" "+S(o(s)("exit"))+" ",1),be]),_:1})])]),e(x,{label:o(s)("category"),path:"category_id"},{default:n(()=>[e(O,{options:D.value,fitlerable:"",clearable:"",onKeydown:b,value:u.value.category_id,"onUpdate:value":i[0]||(i[0]=c=>u.value.category_id=c),"label-field":"title_"+o(h),"value-field":"id"},null,8,["options","value","label-field"])]),_:1},8,["label"]),_("div",ke,[e(x,{label:o(s)("title")+" UZB",path:"title_uz"},{default:n(()=>[e(k,{ref_key:"inputInstRef",ref:K,onKeydown:b,value:u.value.title_uz,"onUpdate:value":i[1]||(i[1]=c=>u.value.title_uz=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(x,{label:o(s)("title")+" KOR",path:"title_kr"},{default:n(()=>[e(k,{onKeydown:b,value:u.value.title_kr,"onUpdate:value":i[2]||(i[2]=c=>u.value.title_kr=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(x,{label:o(s)("title")+" RUS",path:"title_ru"},{default:n(()=>[e(k,{onKeydown:b,value:u.value.title_ru,"onUpdate:value":i[3]||(i[3]=c=>u.value.title_ru=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(x,{label:o(s)("title")+" ENG",path:"title_en"},{default:n(()=>[e(k,{onKeydown:b,value:u.value.title_en,"onUpdate:value":i[4]||(i[4]=c=>u.value.title_en=c),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"])])]),_:1},8,["show"])]),_:1},8,["model"])}}},Se={class:"p-4 space-y-4"},Ce={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ze={class:"text-xl font-bold"},Ie={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},Ue=_("span",{class:"ml-1 text-xs"},"Shift+R",-1),Re=_("span",{class:"ml-1 text-xs"},"Insert",-1),Pe={__name:"Index",setup(j){const{t,locale:s}=L(),{insert:h,shift:f,r:U}=ie(),B=Q(),C=W(),K=X(),D=Y(),u=oe("fileUrl"),P=m([]),v=m(!1);m(!1);const z=m({text:""}),d=m({create:!1,update:!1,update_id:null}),y=l=>{v.value=!0,E.all(z.value).then(a=>{P.value=a,v.value=!1,l&&(d.value[l]=!1)})},b=ee(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(l,a)=>a+1},{title:t("category")+" UZB",key:"title",render(l){var a,c;return console.log(l.category),w("div",{class:"flex items-center"},[l.image?w(se,{src:u+((a=l.category)==null?void 0:a.image),height:35,width:50,style:{borderRadius:"35px",marginRight:"8px"},lazy:!0,previewDisabled:!0}):w(re,{size:"small",style:{marginRight:"8px"}}),w("span",{class:"font-semibold"},(c=l.category)==null?void 0:c.title)])}},{title:t("title")+" UZB",key:"title_uz"},{title:t("title")+" KOR",key:"title_kr"},{title:t("title")+" RUS",key:"title_ru"},{title:t("title")+" ENG",key:"title_en"},{title:t("action"),key:"action",align:"center",width:120,render(l){return[w(M,{size:"small",type:"success",onClick:a=>{d.value.update_id=l.id,d.value.update=!0},style:{marginRight:"8px"}},{icon:()=>w(N,{component:_e,size:22})}),w(M,{size:"small",type:"warning",onClick:()=>{C.warning({title:t("warning"),content:t("delete_row"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:()=>{E.delete(l.id).then(()=>y()).catch(a=>{D.errorPage=a.data,B.push({name:"error page"})})},onNegativeClick:()=>K.success(t("cancel"))})}},{icon:()=>w(N,{component:me,size:22})})]}}]),r=te({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:l=>r.page=l,onUpdatePageSize:l=>{r.pageSize=l,r.page=1}}),i=l=>({style:"cursor: pointer;"}),I=()=>y(),A=()=>{z.value.text="",y()},O=()=>d.value.create=!0,x=l=>d.value[l]=!1,k=l=>y(l);return ae(h,l=>l&&O()),le(()=>{f.value&&U.value&&y()}),Z(()=>y()),(l,a)=>{const c=p("n-input"),H=p("n-data-table"),G=p("n-card"),V=p("n-modal");return F(),ne("div",Se,[_("div",Ce,[_("h2",ze,S(o(t)("brand")),1),_("div",Ie,[e(c,{value:z.value.text,"onUpdate:value":a[0]||(a[0]=g=>z.value.text=g),onInput:I,placeholder:o(t)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:n(()=>[e(o(N),null,{default:n(()=>[e(o(ue))]),_:1})]),_:1},8,["value","placeholder"]),e(o(M),{type:"warning",onClick:A},{icon:n(()=>[e(o(N),null,{default:n(()=>[e(o(fe))]),_:1})]),default:n(()=>[T(" "+S(o(t)("update"))+" ",1),Ue]),_:1}),e(o(M),{type:"success",onClick:O},{icon:n(()=>[e(o(N),null,{default:n(()=>[e(o(pe))]),_:1})]),default:n(()=>[T(" "+S(o(t)("add"))+" ",1),Re]),_:1})])]),e(H,{"row-props":i,pagination:r,loading:v.value,columns:b.value,data:P.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)"},null,8,["pagination","loading","columns","data"]),e(V,{"transform-origin":"center",show:d.value.create,"onUpdate:show":a[3]||(a[3]=g=>d.value.create=g)},{default:n(()=>[e(G,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:n(()=>[e(q,{onClose:a[1]||(a[1]=g=>x("create")),onCreate:a[2]||(a[2]=g=>k("create")),type:"create"})]),_:1})]),_:1},8,["show"]),e(V,{"transform-origin":"center",show:d.value.update,"onUpdate:show":a[6]||(a[6]=g=>d.value.update=g)},{default:n(()=>[e(G,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:n(()=>[e(q,{type:"update",id:d.value.update_id,onClose:a[4]||(a[4]=g=>x("update")),onUpdate:a[5]||(a[5]=g=>k("update"))},null,8,["id"])]),_:1})]),_:1},8,["show"])])}}};export{Pe as default};
