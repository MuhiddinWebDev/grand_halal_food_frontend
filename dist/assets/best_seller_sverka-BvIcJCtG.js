import{b as H,r as d,g as I,c as b,a as t,i as n,v as s,s as e,j as c,n as N,k as u,m as R,o as f,G as E,R as T,S as V,U as z}from"./index-GwBpnSVU.js";import{E as J}from"./eye-Dra6YFIM.js";import{E as G}from"./exit--WL2js6I.js";import{r as $}from"./report.service-y6CgOxt0.js";import{p as A}from"./product.service-UEhOC2xT.js";import{o as K}from"./order.service-CheXL7ad.js";import{c as _}from"./NumberFormat-BDrUmd0_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"p-4"},Q={class:"bg-white rounded-lg shadow-md"},W={class:"flex justify-between items-center p-4 bg-gray-100 rounded-t-lg"},X={class:"text-xl font-bold"},Z={class:"flex flex-wrap gap-4 p-2"},tt={class:"w-[400px] sm:w-[300px]"},et={class:"w-full sm:w-64"},st={class:"w-full sm:w-64"},ot={class:"w-full sm:w-64"},lt={class:"w-full sm:w-auto"},at={class:"p-4"},nt={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden border"},rt={class:"bg-gray-200 text-left border"},dt={class:"px-4 py-2 text-sm"},ct={class:"px-4 py-2 text-sm"},it={class:"px-4 py-2 text-sm"},pt={class:"px-4 py-2 text-sm"},ut={class:"px-4 py-2 text-sm"},_t={class:"px-4 py-2 text-sm"},ht={class:"px-4 py-2 text-sm w-[120px]"},vt={class:"px-4 py-2 border"},mt={class:"px-4 py-2 border"},xt={class:"px-4 py-2 border"},bt={class:"px-4 py-2 text-right border"},ft={class:"px-4 py-2 text-right border"},yt={class:"px-4 py-2 text-right border"},gt={class:"px-4 py-2 border"},wt={class:"px-4 py-2 border"},kt={class:"bg-gray-100"},St={colspan:"2",class:"px-4 py-2 text-center font-semibold border"},Ct={class:"px-4 py-2 text-right border"},Dt={class:"px-4 py-2 text-right border"},Lt={class:"px-4 py-2 text-right border"},Ht={__name:"best_seller_sverka",setup(Et){const{t:o,locale:h}=H(),O=N(),U=R("dayJS"),y=d([]),v=new Date,Y=new Date(v.getFullYear(),v.getMonth(),1);let m=d(!1),g=d(!0);const p=d({data:[],total_quantity:0,total_amount:0,total_summa:0}),w=d([]),q=d([{value:"yes",label:o("yes")},{value:"no",label:o("no")}]),r=d({range:[Y.getTime(),v.getTime()],product_id:null,status:null,paid_action:null}),M=async()=>{try{y.value=await A.all(),w.value=await K.statusOption()}catch(i){console.log(i)}};I(()=>{M()});const j=()=>{m.value=!0,g.value=!0,$.orderSverka(r.value).then(i=>{p.value=i,m.value=!1,i.data&&i.data.length>0&&(g.value=!1)})};return(i,a)=>{const k=u("n-icon"),S=u("n-button"),B=u("n-date-picker"),x=u("n-select"),F=u("n-spin");return f(),b("div",P,[t("div",Q,[t("div",W,[t("h2",X,s(e(o)("most sold sverka")),1),n(S,{onClick:a[0]||(a[0]=l=>e(O).go(-1)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700"},{icon:c(()=>[n(k,{size:"28"},{default:c(()=>[n(e(G))]),_:1})]),default:c(()=>[E(" "+s(e(o)("exit")),1)]),_:1})]),t("div",Z,[t("div",tt,[n(B,{value:r.value.range,"onUpdate:value":a[1]||(a[1]=l=>r.value.range=l),type:"datetimerange",clearable:"",class:"w-full sm:w-[300px]"},null,8,["value"])]),t("div",et,[n(x,{options:y.value,value:r.value.product_id,"onUpdate:value":a[2]||(a[2]=l=>r.value.product_id=l),"value-field":"id","label-field":"title_"+e(h),placeholder:e(o)("product"),filterable:"",clearable:"",class:"w-full"},null,8,["options","value","label-field","placeholder"])]),t("div",st,[n(x,{options:w.value,value:r.value.status,"onUpdate:value":a[3]||(a[3]=l=>r.value.status=l),placeholder:e(o)("order")+" "+e(o)("status").toLocaleLowerCase(),filterable:"",clearable:"",class:"w-full","label-field":"label_"+e(h)},null,8,["options","value","placeholder","label-field"])]),t("div",ot,[n(x,{options:q.value,value:r.value.paid_action,"onUpdate:value":a[4]||(a[4]=l=>r.value.paid_action=l),placeholder:e(o)("paid"),filterable:"",clearable:"",class:"w-full"},null,8,["options","value","placeholder"])]),t("div",lt,[n(S,{type:"success",onClick:j,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-700 w-full sm:w-auto"},{icon:c(()=>[n(k,null,{default:c(()=>[n(e(J))]),_:1})]),default:c(()=>[E(" "+s(e(o)("see")),1)]),_:1})])]),t("div",at,[n(F,{show:e(m),class:"w-full"},{default:c(()=>[t("table",nt,[t("thead",null,[t("tr",rt,[a[5]||(a[5]=t("th",{class:"px-4 py-2 text-sm w-10"},"#",-1)),t("th",dt,s(e(o)("datetime")),1),t("th",ct,s(e(o)("product")),1),t("th",it,s(e(o)("total"))+" "+s(e(o)("count").toLocaleLowerCase()),1),t("th",pt,s(e(o)("price")),1),t("th",ut,s(e(o)("total"))+" "+s(e(o)("price").toLocaleLowerCase()),1),t("th",_t,s(e(o)("status")),1),t("th",ht,s(e(o)("paid")),1)])]),t("tbody",null,[(f(!0),b(T,null,V(p.value.data,(l,C)=>{var D,L;return f(),b("tr",{key:C,class:"border hover:bg-gray-50 cursor-pointer"},[t("td",vt,s(C+1),1),t("td",mt,s(e(U)((D=l.order)==null?void 0:D.datetime).format("DD.MM.YYYY HH:mm")),1),t("td",xt,s((L=l.product)==null?void 0:L["title_"+e(h)]),1),t("td",bt,s(l.quantity),1),t("td",ft,s(e(_)(l.price)),1),t("td",yt,s(e(_)(l.quantity*l.price)),1),t("td",gt,s(l),1),t("td",wt,[t("div",{class:z(["text-center text-white","rounded","py-1 px-2",l.paid_action?"bg-green-500":"bg-red-500"])},[t("p",null,s(l.paid_action?e(o)("yes"):e(o)("no")),1)],2)])])}),128)),t("tr",kt,[t("td",St,s(e(o)("total")),1),t("td",Ct,s(p.value.total_quantity||0),1),t("td",Dt,s(e(_)(p.value.total_amount)),1),t("td",Lt,s(e(_)(p.value.total_summa)),1),a[6]||(a[6]=t("td",null,null,-1))])])])]),_:1},8,["show"])])])])}}};export{Ht as default};
