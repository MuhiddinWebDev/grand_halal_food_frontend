import{x as U,u as L,r as m,i as F,j as p,o as H,m as J,l as a,k as e,a as _,t as S,n as l,G as T,d as Q,f as W,H as X,g as Y,h as ee,I as te,w as ae,C as le,c as ne,N,J as M,s as oe,v as y,K as se,L as ie}from"./index-Smf2fMDT.js";import{u as re,S as ue}from"./index-Q5UU7Qm6.js";import{S as ce,E as de,A as pe,P as _e,D as me}from"./delete-NUqtjwOP.js";import{R as fe}from"./refresh-v6LrumIH.js";import{c as ve}from"./category.service-neo-UNsm.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const $="/brand";class ge{all(t){let s=t!=null&&t.text?"?text="+t.text:"";return U.get($+"/all"+s).then(h=>h)}create(t){return U.post($+"/create",t).then(s=>s)}update(t,s){return U.patch($+`/update/${t}`,s).then(h=>h)}getOne(t){return U.get($+`/getById/${t}`).then(s=>s)}delete(t){return U.delete($+`/delete/${t}`).then(s=>s)}}const E=new ge,xe={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0"},we={class:"text-xl font-semibold"},ye={class:"flex gap-2"},he=_("span",{class:"text-xs ml-1"},"Enter",-1),be=_("span",{class:"text-xs ml-1"},"Esc",-1),ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"},q={__name:"Form",props:{type:String,id:[String,Number]},emits:["create","update","close"],setup(j,{emit:t}){const{t:s,locale:h}=L(),f=j,R=t,B=m(null),C=m(!1),K=m(null),D=m([]),u=m({title_uz:"",title_ru:"",title_kr:"",title_en:"",category_id:null}),P=()=>{ve.all().then(i=>{D.value=i})},v=i=>({required:!0,trigger:"blur",validator:(r,I)=>{if(!I)return new Error(s(i==="image"?"require_image":"require_name"))}}),z={title_uz:v("title_uz"),title_kr:v("title_kr"),title_ru:v("title_ru"),title_en:v("title_en"),image:v("image")};F(async()=>{if(P(),f.type==="update"&&f.id)try{const i=await E.getOne(f.id);u.value=i}catch(i){console.error("Ma'lumot yuklashda xatolik:",i)}setTimeout(()=>{var i;(i=K.value)==null||i.focus()},100)});const c=async()=>{var i;try{if(await((i=B.value)==null?void 0:i.validate()),C.value=!0,f.type==="create"){const r=await E.create(u.value);R("create",r)}else if(f.type==="update"){const r=await E.update(f.id,u.value);R("update",r)}}catch(r){console.warn("Form not valid or failed",r)}finally{C.value=!1}},x=()=>R("close"),b=i=>{i.code==="Enter"&&c()};return(i,r)=>{const I=p("n-icon"),A=p("n-button"),O=p("n-select"),w=p("n-form-item"),k=p("n-input"),n=p("n-spin"),o=p("n-form");return H(),J(o,{ref_key:"formRef",ref:B,model:u.value,rules:z},{default:a(()=>[e(n,{show:C.value},{default:a(()=>[_("div",xe,[_("p",we,S(l(s)("brand"))+" "+S(f.type=="create"?l(s)("add").toLowerCase():l(s)("change").toLowerCase()),1),_("div",ye,[e(A,{onClick:c,type:"success",disabled:C.value,class:"min-w-[120px]"},{icon:a(()=>[e(I,null,{default:a(()=>[e(l(ce))]),_:1})]),default:a(()=>[T(" "+S(l(s)("save"))+" ",1),he]),_:1},8,["disabled"]),e(A,{onClick:x,type:"warning",class:"min-w-[120px]"},{icon:a(()=>[e(I,null,{default:a(()=>[e(l(de))]),_:1})]),default:a(()=>[T(" "+S(l(s)("exit"))+" ",1),be]),_:1})])]),e(w,{label:l(s)("category"),path:"category_id"},{default:a(()=>[e(O,{options:D.value,fitlerable:"",clearable:"",onKeydown:b,value:u.value.category_id,"onUpdate:value":r[0]||(r[0]=d=>u.value.category_id=d),"label-field":"title_"+l(h),"value-field":"id"},null,8,["options","value","label-field"])]),_:1},8,["label"]),_("div",ke,[e(w,{label:l(s)("title")+" UZB",path:"title_uz"},{default:a(()=>[e(k,{ref_key:"inputInstRef",ref:K,onKeydown:b,value:u.value.title_uz,"onUpdate:value":r[1]||(r[1]=d=>u.value.title_uz=d),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(w,{label:l(s)("title")+" KOR",path:"title_kr"},{default:a(()=>[e(k,{onKeydown:b,value:u.value.title_kr,"onUpdate:value":r[2]||(r[2]=d=>u.value.title_kr=d),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(w,{label:l(s)("title")+" RUS",path:"title_ru"},{default:a(()=>[e(k,{onKeydown:b,value:u.value.title_ru,"onUpdate:value":r[3]||(r[3]=d=>u.value.title_ru=d),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"]),e(w,{label:l(s)("title")+" ENG",path:"title_en"},{default:a(()=>[e(k,{onKeydown:b,value:u.value.title_en,"onUpdate:value":r[4]||(r[4]=d=>u.value.title_en=d),"show-count":"",clearable:""},null,8,["value"])]),_:1},8,["label"])])]),_:1},8,["show"])]),_:1},8,["model"])}}},Se={class:"p-4 space-y-4"},Ce={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ze={class:"text-xl font-bold"},Ie={class:"flex flex-col sm:flex-row gap-2 sm:items-center"},Re=_("span",{class:"ml-1 text-xs"},"Shift+R",-1),Ue=_("span",{class:"ml-1 text-xs"},"Insert",-1),Pe={__name:"Index",setup(j){const{t,locale:s}=L(),{insert:h,shift:f,r:R}=re(),B=Q(),C=W(),K=X(),D=Y(),u=oe("fileUrl"),P=m([]),v=m(!1);m(!1);const z=m({text:""}),c=m({create:!1,update:!1,update_id:null}),x=n=>{v.value=!0,E.all(z.value).then(o=>{P.value=o,v.value=!1,n&&(c.value[n]=!1)})},b=ee(()=>[{title:"â„–",key:"id",align:"center",width:50,render:(n,o)=>o+1},{title:t("title")+" UZB",key:"title",render(n){return y("div",{class:"flex items-center"},[n.image?y(se,{src:u+n.image,height:35,width:50,style:{borderRadius:"35px",marginRight:"8px"},lazy:!0,previewDisabled:!0}):y(ie,{size:"small",style:{marginRight:"8px"}}),y("span",{class:"font-semibold"},n.title_uz)])}},{title:t("title")+" KOR",key:"title_kr"},{title:t("title")+" RUS",key:"title_ru"},{title:t("title")+" ENG",key:"title_en"},{title:t("action"),key:"action",align:"center",width:120,render(n){return[y(M,{size:"small",type:"success",onClick:o=>{c.value.update_id=n.id,c.value.update=!0},style:{marginRight:"8px"}},{icon:()=>y(N,{component:_e,size:22})}),y(M,{size:"small",type:"warning",onClick:()=>{C.warning({title:t("warning"),content:t("delete_row"),positiveText:t("yes"),negativeText:t("no"),onPositiveClick:()=>{E.delete(n.id).then(()=>x()).catch(o=>{D.errorPage=o.data,B.push({name:"error page"})})},onNegativeClick:()=>K.success(t("cancel"))})}},{icon:()=>y(N,{component:me,size:22})})]}}]),i=te({page:1,pageSize:10,showSizePicker:!0,pageSizes:[10,15,20],onChange:n=>i.page=n,onUpdatePageSize:n=>{i.pageSize=n,i.page=1}}),r=n=>({style:"cursor: pointer;"}),I=()=>x(),A=()=>{z.value.text="",x()},O=()=>c.value.create=!0,w=n=>c.value[n]=!1,k=n=>x(n);return ae(h,n=>n&&O()),le(()=>{f.value&&R.value&&x()}),F(()=>x()),(n,o)=>{const d=p("n-input"),Z=p("n-data-table"),G=p("n-card"),V=p("n-modal");return H(),ne("div",Se,[_("div",Ce,[_("h2",ze,S(l(t)("brand")),1),_("div",Ie,[e(d,{value:z.value.text,"onUpdate:value":o[0]||(o[0]=g=>z.value.text=g),onInput:I,placeholder:l(t)("search"),clearable:"",class:"w-full sm:w-80"},{prefix:a(()=>[e(l(N),null,{default:a(()=>[e(l(ue))]),_:1})]),_:1},8,["value","placeholder"]),e(l(M),{type:"warning",onClick:A},{icon:a(()=>[e(l(N),null,{default:a(()=>[e(l(fe))]),_:1})]),default:a(()=>[T(" "+S(l(t)("update"))+" ",1),Re]),_:1}),e(l(M),{type:"success",onClick:O},{icon:a(()=>[e(l(N),null,{default:a(()=>[e(l(pe))]),_:1})]),default:a(()=>[T(" "+S(l(t)("add"))+" ",1),Ue]),_:1})])]),e(Z,{"row-props":r,pagination:i,loading:v.value,columns:b.value,data:P.value,bordered:!0,"single-line":!1,size:"small","scroll-x":1300,"max-height":"calc(100vh - 315px)"},null,8,["pagination","loading","columns","data"]),e(V,{"transform-origin":"center",show:c.value.create,"onUpdate:show":o[3]||(o[3]=g=>c.value.create=g)},{default:a(()=>[e(G,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:a(()=>[e(q,{onClose:o[1]||(o[1]=g=>w("create")),onCreate:o[2]||(o[2]=g=>k("create")),type:"create"})]),_:1})]),_:1},8,["show"]),e(V,{"transform-origin":"center",show:c.value.update,"onUpdate:show":o[6]||(o[6]=g=>c.value.update=g)},{default:a(()=>[e(G,{class:"w-full max-w-3xl",bordered:!1,role:"dialog","aria-modal":"true"},{default:a(()=>[e(q,{type:"update",id:c.value.update_id,onClose:o[4]||(o[4]=g=>w("update")),onUpdate:o[5]||(o[5]=g=>k("update"))},null,8,["id"])]),_:1})]),_:1},8,["show"])])}}};export{Pe as default};
