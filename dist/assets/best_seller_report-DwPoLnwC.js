import{b as V,r as u,g as j,c as m,a as t,i as n,v as s,s as e,j as c,n as z,k as p,o as g,G as S,R as M,S as $,U as O}from"./index-GwBpnSVU.js";import{E as G}from"./eye-Dra6YFIM.js";import{E as H}from"./exit--WL2js6I.js";import{r as Y}from"./report.service-y6CgOxt0.js";import{p as A}from"./product.service-UEhOC2xT.js";import{o as J}from"./order.service-CheXL7ad.js";import{c as R}from"./NumberFormat-BDrUmd0_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"p-4"},P={class:"bg-white rounded-lg shadow-md"},Q={class:"flex justify-between items-center p-4 bg-gray-100 rounded-t-lg"},W={class:"text-xl font-bold"},X={class:"flex flex-wrap gap-4 p-2"},Z={class:"w-[400px] sm:w-[300px]"},tt={class:"w-full sm:w-64"},et={class:"w-full sm:w-64"},ot={class:"w-full sm:w-64"},st={class:"w-full sm:w-auto"},lt={class:"p-4"},at={class:"min-w-full bg-white shadow-md rounded-lg overflow-hidden border"},nt={class:"bg-gray-200 text-left border"},rt={class:"px-4 py-2 text-sm"},dt={class:"px-4 py-2 text-sm"},ut={class:"px-4 py-2 text-sm"},ct={class:"px-4 py-2 text-sm"},it={class:"px-4 py-2 text-sm w-[120px]"},pt=["onDblclick"],_t={class:"px-4 py-2 border"},vt={class:"px-4 py-2 border"},bt={class:"px-4 py-2 text-right border"},ht={class:"px-4 py-2 text-right border"},ft={class:"px-4 py-2 border"},xt={class:"px-4 py-2 border"},mt={class:"bg-gray-100"},gt={colspan:"2",class:"px-4 py-2 text-center font-semibold border"},wt={class:"px-4 py-2 text-right border"},yt={class:"px-4 py-2 text-right border"},qt={__name:"best_seller_report",setup(kt){const{t:o,locale:_}=V(),w=z(),y=u([]),h=new Date,U=new Date(h.getFullYear(),h.getMonth(),1);let f=u(!1),k=u(!0);const v=u({data:[],total_quantity:0,total_amount:0}),i=u([]),q=u([{value:"yes",label:o("yes")},{value:"no",label:o("no")}]),r=u({range:[U.getTime(),h.getTime()],product_id:null,status:null,paid_action:null}),B=async()=>{try{y.value=await A.all(),i.value=await J.statusOption(),console.log(i.value)}catch(d){console.log(d)}};j(()=>{B()});const F=()=>{f.value=!0,k.value=!0,Y.orderReport(r.value).then(d=>{v.value=d,f.value=!1,d.data&&d.data.length>0&&(console.log("Enter "),k.value=!1)})},I=d=>{w.push({path:"/sverka-orders",query:{range:r.value.range,product_id:d.product_id,type:d.type,action:!0}})};return(d,a)=>{const C=p("n-icon"),D=p("n-button"),N=p("n-date-picker"),x=p("n-select"),T=p("n-spin");return g(),m("div",K,[t("div",P,[t("div",Q,[t("h2",W,s(e(o)("most sold report")),1),n(D,{onClick:a[0]||(a[0]=l=>e(w).go(-1)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700"},{icon:c(()=>[n(C,{size:"28"},{default:c(()=>[n(e(H))]),_:1})]),default:c(()=>[S(" "+s(e(o)("exit")),1)]),_:1})]),t("div",X,[t("div",Z,[n(N,{value:r.value.range,"onUpdate:value":a[1]||(a[1]=l=>r.value.range=l),type:"datetimerange",clearable:"",class:"w-full sm:w-[300px]"},null,8,["value"])]),t("div",tt,[n(x,{options:y.value,value:r.value.product_id,"onUpdate:value":a[2]||(a[2]=l=>r.value.product_id=l),"value-field":"id","label-field":"title_"+e(_),placeholder:e(o)("product"),filterable:"",clearable:"",class:"w-full"},null,8,["options","value","label-field","placeholder"])]),t("div",et,[n(x,{options:i.value,value:r.value.status,"onUpdate:value":a[3]||(a[3]=l=>r.value.status=l),placeholder:e(o)("order")+" "+e(o)("status").toLocaleLowerCase(),filterable:"",clearable:"",class:"w-full","label-field":"label_"+e(_)},null,8,["options","value","placeholder","label-field"])]),t("div",ot,[n(x,{options:q.value,value:r.value.paid_action,"onUpdate:value":a[4]||(a[4]=l=>r.value.paid_action=l),placeholder:e(o)("paid"),filterable:"",clearable:"",class:"w-full"},null,8,["options","value","placeholder"])]),t("div",st,[n(D,{type:"success",onClick:F,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-700 w-full sm:w-auto"},{icon:c(()=>[n(C,null,{default:c(()=>[n(e(G))]),_:1})]),default:c(()=>[S(" "+s(e(o)("see")),1)]),_:1})])]),t("div",lt,[n(T,{show:e(f),class:"w-full"},{default:c(()=>[t("table",at,[t("thead",null,[t("tr",nt,[a[5]||(a[5]=t("th",{class:"px-4 py-2 text-sm w-10"},"#",-1)),t("th",rt,s(e(o)("product")),1),t("th",dt,s(e(o)("total"))+" "+s(e(o)("count").toLocaleLowerCase()),1),t("th",ut,s(e(o)("total"))+" "+s(e(o)("price").toLocaleLowerCase()),1),t("th",ct,s(e(o)("status")),1),t("th",it,s(e(o)("paid")),1)])]),t("tbody",null,[(g(!0),m(M,null,$(v.value.data,(l,E)=>{var L;return g(),m("tr",{key:E,class:"border hover:bg-gray-50 cursor-pointer",onDblclick:b=>I(l)},[t("td",_t,s(E+1),1),t("td",vt,s((L=l.product)==null?void 0:L["title_"+e(_)]),1),t("td",bt,s(l.total_quantity),1),t("td",ht,s(e(R)(l.total_amount)),1),t("td",ft,[t("div",{class:O(["text-center","rounded","py-1",i.value.find(b=>b.value===l.status).color])},[t("p",null,s(i.value.find(b=>b.value===l.status)["label_"+e(_)]),1)],2)]),t("td",xt,[t("div",{class:O(["text-center text-white","rounded","py-1 px-2",l.paid_action?"bg-green-500":"bg-red-500"])},[t("p",null,s(l.paid_action?e(o)("yes"):e(o)("no")),1)],2)])],40,pt)}),128)),t("tr",mt,[t("td",gt,s(e(o)("total")),1),t("td",wt,s(v.value.total_quantity||0),1),t("td",yt,s(e(R)(v.value.total_amount)),1),a[6]||(a[6]=t("td",null,null,-1)),a[7]||(a[7]=t("td",null,null,-1))])])])]),_:1},8,["show"])])])])}}};export{qt as default};
